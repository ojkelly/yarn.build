/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@ojkelly/plugin-build",
factory: function (require) {
var plugin=(()=>{var za=Object.create,Ge=Object.defineProperty,Ka=Object.defineProperties,Va=Object.getOwnPropertyDescriptor,Xa=Object.getOwnPropertyDescriptors,Ja=Object.getOwnPropertyNames,Rn=Object.getOwnPropertySymbols,Za=Object.getPrototypeOf,Tn=Object.prototype.hasOwnProperty,eu=Object.prototype.propertyIsEnumerable;var Fn=(e,r,t)=>r in e?Ge(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,q=(e,r)=>{for(var t in r||(r={}))Tn.call(r,t)&&Fn(e,t,r[t]);if(Rn)for(var t of Rn(r))eu.call(r,t)&&Fn(e,t,r[t]);return e},Ye=(e,r)=>Ka(e,Xa(r)),ru=e=>Ge(e,"__esModule",{value:!0});var C=e=>{if(typeof require!="undefined")return require(e);throw new Error('Dynamic require of "'+e+'" is not supported')};var b=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),tu=(e,r)=>{for(var t in r)Ge(e,t,{get:r[t],enumerable:!0})},nu=(e,r,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Ja(r))!Tn.call(e,n)&&n!=="default"&&Ge(e,n,{get:()=>r[n],enumerable:!(t=Va(r,n))||t.enumerable});return e},_=e=>nu(ru(Ge(e!=null?za(Za(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Hn=b((kh,Yn)=>{function Mn(e){return Array.isArray(e)?e:[e]}var jn="",Bn=" ",Zr="\\",iu=/^\s+$/,ou=/^\\!/,su=/^\\#/,au=/\r?\n/g,uu=/^\.*\/|^\.+$/,et="/",$n=typeof Symbol!="undefined"?Symbol.for("node-ignore"):"node-ignore",cu=(e,r,t)=>Object.defineProperty(e,r,{value:t}),lu=/([0-z])-([0-z])/g,fu=e=>e.replace(lu,(r,t,n)=>t.charCodeAt(0)<=n.charCodeAt(0)?r:jn),hu=e=>{let{length:r}=e;return e.slice(0,r-r%2)},pu=[[/\\?\s+$/,e=>e.indexOf("\\")===0?Bn:jn],[/\\\s/g,()=>Bn],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,r,t)=>r+6<t.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)\\\*(?=.+)/g,(e,r)=>`${r}[^\\/]*`],[/\\\\\\(?=[$.|*+(){^])/g,()=>Zr],[/\\\\/g,()=>Zr],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,r,t,n,i)=>r===Zr?`\\[${t}${hu(n)}${i}`:i==="]"&&n.length%2==0?`[${fu(t)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,r)=>`${r?`${r}[^/]+`:"[^/]*"}(?=$|\\/$)`]],qn=Object.create(null),du=(e,r,t)=>{let n=qn[e];if(n)return n;let i=pu.reduce((o,s)=>o.replace(s[0],s[1].bind(e)),e);return qn[e]=t?new RegExp(i,"i"):new RegExp(i)},rt=e=>typeof e=="string",mu=e=>e&&rt(e)&&!iu.test(e)&&e.indexOf("#")!==0,gu=e=>e.split(au),Un=class{constructor(r,t,n,i){this.origin=r,this.pattern=t,this.negative=n,this.regex=i}},yu=(e,r)=>{let t=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(ou,"!").replace(su,"#");let i=du(e,n,r);return new Un(t,e,n,i)},vu=(e,r)=>{throw new r(e)},oe=(e,r,t)=>rt(e)?e?oe.isNotRelative(e)?t(`path should be a \`path.relative()\`d string, but got "${r}"`,RangeError):!0:t("path must not be empty",TypeError):t(`path must be a string, but got \`${r}\``,TypeError),Wn=e=>uu.test(e);oe.isNotRelative=Wn;oe.convert=e=>e;var Gn=class{constructor({ignorecase:r=!0}={}){this._rules=[],this._ignorecase=r,cu(this,$n,!0),this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(r){if(r&&r[$n]){this._rules=this._rules.concat(r._rules),this._added=!0;return}if(mu(r)){let t=yu(r,this._ignorecase);this._added=!0,this._rules.push(t)}}add(r){return this._added=!1,Mn(rt(r)?gu(r):r).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(r){return this.add(r)}_testOne(r,t){let n=!1,i=!1;return this._rules.forEach(o=>{let{negative:s}=o;if(i===s&&n!==i||s&&!n&&!i&&!t)return;o.regex.test(r)&&(n=!s,i=s)}),{ignored:n,unignored:i}}_test(r,t,n,i){let o=r&&oe.convert(r);return oe(o,r,vu),this._t(o,t,n,i)}_t(r,t,n,i){if(r in t)return t[r];if(i||(i=r.split(et)),i.pop(),!i.length)return t[r]=this._testOne(r,n);let o=this._t(i.join(et)+et,t,n,i);return t[r]=o.ignored?o:this._testOne(r,n)}ignores(r){return this._test(r,this._ignoreCache,!1).ignored}createFilter(){return r=>!this.ignores(r)}filter(r){return Mn(r).filter(this.createFilter())}test(r){return this._test(r,this._testCache,!0)}},wr=e=>new Gn(e),bu=()=>!1,xu=e=>oe(e&&oe.convert(e),e,bu);wr.isPathValid=xu;wr.default=wr;Yn.exports=wr;if(typeof process!="undefined"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=t=>/^\\\\\?\\/.test(t)||/["<>|\u0000-\u001F]+/u.test(t)?t:t.replace(/\\/g,"/");oe.convert=e;let r=/^[a-z]:\//i;oe.isNotRelative=t=>r.test(t)||Wn(t)}});var Qn=b(tt=>{var we=C("path"),fe=process.platform==="win32",he=C("fs"),wu=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function Cu(){var e;if(wu){var r=new Error;e=t}else e=n;return e;function t(i){i&&(r.message=i.message,i=r,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var o="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(o):console.error(o)}}}}function _u(e){return typeof e=="function"?e:Cu()}var Sh=we.normalize;fe?se=/(.*?)(?:[\/\\]+|$)/g:se=/(.*?)(?:[\/]+|$)/g;var se;fe?He=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:He=/^[\/]*/;var He;tt.realpathSync=function(r,t){if(r=we.resolve(r),t&&Object.prototype.hasOwnProperty.call(t,r))return t[r];var n=r,i={},o={},s,a,u,c;l();function l(){var g=He.exec(r);s=g[0].length,a=g[0],u=g[0],c="",fe&&!o[u]&&(he.lstatSync(u),o[u]=!0)}for(;s<r.length;){se.lastIndex=s;var f=se.exec(r);if(c=a,a+=f[0],u=c+f[1],s=se.lastIndex,!(o[u]||t&&t[u]===u)){var h;if(t&&Object.prototype.hasOwnProperty.call(t,u))h=t[u];else{var p=he.lstatSync(u);if(!p.isSymbolicLink()){o[u]=!0,t&&(t[u]=u);continue}var d=null;if(!fe){var m=p.dev.toString(32)+":"+p.ino.toString(32);i.hasOwnProperty(m)&&(d=i[m])}d===null&&(he.statSync(u),d=he.readlinkSync(u)),h=we.resolve(c,d),t&&(t[u]=h),fe||(i[m]=d)}r=we.resolve(h,r.slice(s)),l()}}return t&&(t[n]=r),r};tt.realpath=function(r,t,n){if(typeof n!="function"&&(n=_u(t),t=null),r=we.resolve(r),t&&Object.prototype.hasOwnProperty.call(t,r))return process.nextTick(n.bind(null,null,t[r]));var i=r,o={},s={},a,u,c,l;f();function f(){var g=He.exec(r);a=g[0].length,u=g[0],c=g[0],l="",fe&&!s[c]?he.lstat(c,function(v){if(v)return n(v);s[c]=!0,h()}):process.nextTick(h)}function h(){if(a>=r.length)return t&&(t[i]=r),n(null,r);se.lastIndex=a;var g=se.exec(r);return l=u,u+=g[0],c=l+g[1],a=se.lastIndex,s[c]||t&&t[c]===c?process.nextTick(h):t&&Object.prototype.hasOwnProperty.call(t,c)?m(t[c]):he.lstat(c,p)}function p(g,v){if(g)return n(g);if(!v.isSymbolicLink())return s[c]=!0,t&&(t[c]=c),process.nextTick(h);if(!fe){var y=v.dev.toString(32)+":"+v.ino.toString(32);if(o.hasOwnProperty(y))return d(null,o[y],c)}he.stat(c,function(k){if(k)return n(k);he.readlink(c,function(E,T){fe||(o[y]=T),d(E,T)})})}function d(g,v,y){if(g)return n(g);var k=we.resolve(l,v);t&&(t[y]=k),m(k)}function m(g){r=we.resolve(g,r.slice(a)),f()}}});var st=b((Ph,Xn)=>{Xn.exports=pe;pe.realpath=pe;pe.sync=ot;pe.realpathSync=ot;pe.monkeypatch=Au;pe.unmonkeypatch=ku;var Pe=C("fs"),nt=Pe.realpath,it=Pe.realpathSync,Eu=process.version,zn=/^v[0-5]\./.test(Eu),Kn=Qn();function Vn(e){return e&&e.syscall==="realpath"&&(e.code==="ELOOP"||e.code==="ENOMEM"||e.code==="ENAMETOOLONG")}function pe(e,r,t){if(zn)return nt(e,r,t);typeof r=="function"&&(t=r,r=null),nt(e,r,function(n,i){Vn(n)?Kn.realpath(e,r,t):t(n,i)})}function ot(e,r){if(zn)return it(e,r);try{return it(e,r)}catch(t){if(Vn(t))return Kn.realpathSync(e,r);throw t}}function Au(){Pe.realpath=pe,Pe.realpathSync=ot}function ku(){Pe.realpath=nt,Pe.realpathSync=it}});var Zn=b((Rh,Jn)=>{Jn.exports=function(e,r){for(var t=[],n=0;n<e.length;n++){var i=r(e[n],n);Su(i)?t.push.apply(t,i):t.push(i)}return t};var Su=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var ii=b((Th,ni)=>{"use strict";ni.exports=ei;function ei(e,r,t){e instanceof RegExp&&(e=ri(e,t)),r instanceof RegExp&&(r=ri(r,t));var n=ti(e,r,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+e.length,n[1]),post:t.slice(n[1]+r.length)}}function ri(e,r){var t=r.match(e);return t?t[0]:null}ei.range=ti;function ti(e,r,t){var n,i,o,s,a,u=t.indexOf(e),c=t.indexOf(r,u+1),l=u;if(u>=0&&c>0){if(e===r)return[u,c];for(n=[],o=t.length;l>=0&&!a;)l==u?(n.push(l),u=t.indexOf(e,l+1)):n.length==1?a=[n.pop(),c]:(i=n.pop(),i<o&&(o=i,s=c),c=t.indexOf(r,l+1)),l=u<c&&u>=0?u:c;n.length&&(a=[o,s])}return a}});var hi=b((Fh,fi)=>{var Iu=Zn(),oi=ii();fi.exports=Tu;var si="\0SLASH"+Math.random()+"\0",ai="\0OPEN"+Math.random()+"\0",at="\0CLOSE"+Math.random()+"\0",ui="\0COMMA"+Math.random()+"\0",ci="\0PERIOD"+Math.random()+"\0";function ut(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function Pu(e){return e.split("\\\\").join(si).split("\\{").join(ai).split("\\}").join(at).split("\\,").join(ui).split("\\.").join(ci)}function Ru(e){return e.split(si).join("\\").split(ai).join("{").split(at).join("}").split(ui).join(",").split(ci).join(".")}function li(e){if(!e)return[""];var r=[],t=oi("{","}",e);if(!t)return e.split(",");var n=t.pre,i=t.body,o=t.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var a=li(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),r.push.apply(r,s),r}function Tu(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),Re(Pu(e),!0).map(Ru)):[]}function Fu(e){return"{"+e+"}"}function Ou(e){return/^-?0\d/.test(e)}function Lu(e,r){return e<=r}function Nu(e,r){return e>=r}function Re(e,r){var t=[],n=oi("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),o=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),s=i||o,a=n.body.indexOf(",")>=0;if(!s&&!a)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+at+n.post,Re(e)):[e];var u;if(s)u=n.body.split(/\.\./);else if(u=li(n.body),u.length===1&&(u=Re(u[0],!1).map(Fu),u.length===1)){var l=n.post.length?Re(n.post,!1):[""];return l.map(function(le){return n.pre+u[0]+le})}var c=n.pre,l=n.post.length?Re(n.post,!1):[""],f;if(s){var h=ut(u[0]),p=ut(u[1]),d=Math.max(u[0].length,u[1].length),m=u.length==3?Math.abs(ut(u[2])):1,g=Lu,v=p<h;v&&(m*=-1,g=Nu);var y=u.some(Ou);f=[];for(var k=h;g(k,p);k+=m){var E;if(o)E=String.fromCharCode(k),E==="\\"&&(E="");else if(E=String(k),y){var T=d-E.length;if(T>0){var be=new Array(T+1).join("0");k<0?E="-"+be+E.slice(1):E=be+E}}f.push(E)}}else f=Iu(u,function(H){return Re(H,!1)});for(var ie=0;ie<f.length;ie++)for(var re=0;re<l.length;re++){var S=c+f[ie]+l[re];(!r||s||S)&&t.push(S)}return t}});var _r=b((Oh,vi)=>{vi.exports=Q;Q.Minimatch=N;var Qe={sep:"/"};try{Qe=C("path")}catch(e){}var ct=Q.GLOBSTAR=N.GLOBSTAR={},Du=hi(),pi={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},lt="[^/]",ft=lt+"*?",Mu="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ju="(?:(?!(?:\\/|^)\\.).)*?",di=Bu("().*{}+?[]^$\\!");function Bu(e){return e.split("").reduce(function(r,t){return r[t]=!0,r},{})}var mi=/\/+/;Q.filter=$u;function $u(e,r){return r=r||{},function(t,n,i){return Q(t,e,r)}}function gi(e,r){e=e||{},r=r||{};var t={};return Object.keys(r).forEach(function(n){t[n]=r[n]}),Object.keys(e).forEach(function(n){t[n]=e[n]}),t}Q.defaults=function(e){if(!e||!Object.keys(e).length)return Q;var r=Q,t=function(i,o,s){return r.minimatch(i,o,gi(e,s))};return t.Minimatch=function(i,o){return new r.Minimatch(i,gi(e,o))},t};N.defaults=function(e){return!e||!Object.keys(e).length?N:Q.defaults(e).Minimatch};function Q(e,r,t){if(typeof r!="string")throw new TypeError("glob pattern string required");return t||(t={}),!t.nocomment&&r.charAt(0)==="#"?!1:r.trim()===""?e==="":new N(r,t).match(e)}function N(e,r){if(!(this instanceof N))return new N(e,r);if(typeof e!="string")throw new TypeError("glob pattern string required");r||(r={}),e=e.trim(),Qe.sep!=="/"&&(e=e.split(Qe.sep).join("/")),this.options=r,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}N.prototype.debug=function(){};N.prototype.make=qu;function qu(){if(!this._made){var e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();r.debug&&(this.debug=console.error),this.debug(this.pattern,t),t=this.globParts=t.map(function(n){return n.split(mi)}),this.debug(this.pattern,t),t=t.map(function(n,i,o){return n.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}}N.prototype.parseNegate=Uu;function Uu(){var e=this.pattern,r=!1,t=this.options,n=0;if(!t.nonegate){for(var i=0,o=e.length;i<o&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.substr(n)),this.negate=r}}Q.braceExpand=function(e,r){return yi(e,r)};N.prototype.braceExpand=yi;function yi(e,r){if(r||(this instanceof N?r=this.options:r={}),e=typeof e=="undefined"?this.pattern:e,typeof e=="undefined")throw new TypeError("undefined pattern");return r.nobrace||!e.match(/\{.*\}/)?[e]:Du(e)}N.prototype.parse=Wu;var Cr={};function Wu(e,r){if(e.length>1024*64)throw new TypeError("pattern is too long");var t=this.options;if(!t.noglobstar&&e==="**")return ct;if(e==="")return"";var n="",i=!!t.nocase,o=!1,s=[],a=[],u,c=!1,l=-1,f=-1,h=e.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",p=this;function d(){if(u){switch(u){case"*":n+=ft,i=!0;break;case"?":n+=lt,i=!0;break;default:n+="\\"+u;break}p.debug("clearStateChar %j %j",u,n),u=!1}}for(var m=0,g=e.length,v;m<g&&(v=e.charAt(m));m++){if(this.debug("%s	%s %s %j",e,m,n,v),o&&di[v]){n+="\\"+v,o=!1;continue}switch(v){case"/":return!1;case"\\":d(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,m,n,v),c){this.debug("  in class"),v==="!"&&m===f+1&&(v="^"),n+=v;continue}p.debug("call clearStateChar %j",u),d(),u=v,t.noext&&d();continue;case"(":if(c){n+="(";continue}if(!u){n+="\\(";continue}s.push({type:u,start:m-1,reStart:n.length,open:pi[u].open,close:pi[u].close}),n+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,n),u=!1;continue;case")":if(c||!s.length){n+="\\)";continue}d(),i=!0;var y=s.pop();n+=y.close,y.type==="!"&&a.push(y),y.reEnd=n.length;continue;case"|":if(c||!s.length||o){n+="\\|",o=!1;continue}d(),n+="|";continue;case"[":if(d(),c){n+="\\"+v;continue}c=!0,f=m,l=n.length,n+=v;continue;case"]":if(m===f+1||!c){n+="\\"+v,o=!1;continue}if(c){var k=e.substring(f+1,m);try{RegExp("["+k+"]")}catch(In){var E=this.parse(k,Cr);n=n.substr(0,l)+"\\["+E[0]+"\\]",i=i||E[1],c=!1;continue}}i=!0,c=!1,n+=v;continue;default:d(),o?o=!1:di[v]&&!(v==="^"&&c)&&(n+="\\"),n+=v}}for(c&&(k=e.substr(f+1),E=this.parse(k,Cr),n=n.substr(0,l)+"\\["+E[0],i=i||E[1]),y=s.pop();y;y=s.pop()){var T=n.slice(y.reStart+y.open.length);this.debug("setting tail",n,y),T=T.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(In,Pn,Jr){return Jr||(Jr="\\"),Pn+Pn+Jr+"|"}),this.debug(`tail=%j
   %s`,T,T,y,n);var be=y.type==="*"?ft:y.type==="?"?lt:"\\"+y.type;i=!0,n=n.slice(0,y.reStart)+be+"\\("+T}d(),o&&(n+="\\\\");var ie=!1;switch(n.charAt(0)){case".":case"[":case"(":ie=!0}for(var re=a.length-1;re>-1;re--){var S=a[re],H=n.slice(0,S.reStart),le=n.slice(S.reStart,S.reEnd-8),xe=n.slice(S.reEnd-8,S.reEnd),We=n.slice(S.reEnd);xe+=We;var Ya=H.split("(").length-1,Vr=We;for(m=0;m<Ya;m++)Vr=Vr.replace(/\)[+*?]?/,"");We=Vr;var Sn="";We===""&&r!==Cr&&(Sn="$");var Ha=H+le+We+Sn+xe;n=Ha}if(n!==""&&i&&(n="(?=.)"+n),ie&&(n=h+n),r===Cr)return[n,i];if(!i)return Hu(e);var Qa=t.nocase?"i":"";try{var Xr=new RegExp("^"+n+"$",Qa)}catch(In){return new RegExp("$.")}return Xr._glob=e,Xr._src=n,Xr}Q.makeRe=function(e,r){return new N(e,r||{}).makeRe()};N.prototype.makeRe=Gu;function Gu(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var r=this.options,t=r.noglobstar?ft:r.dot?Mu:ju,n=r.nocase?"i":"",i=e.map(function(o){return o.map(function(s){return s===ct?t:typeof s=="string"?Qu(s):s._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(o){this.regexp=!1}return this.regexp}Q.match=function(e,r,t){t=t||{};var n=new N(r,t);return e=e.filter(function(i){return n.match(i)}),n.options.nonull&&!e.length&&e.push(r),e};N.prototype.match=Yu;function Yu(e,r){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;var t=this.options;Qe.sep!=="/"&&(e=e.split(Qe.sep).join("/")),e=e.split(mi),this.debug(this.pattern,"split",e);var n=this.set;this.debug(this.pattern,"set",n);var i,o;for(o=e.length-1;o>=0&&(i=e[o],!i);o--);for(o=0;o<n.length;o++){var s=n[o],a=e;t.matchBase&&s.length===1&&(a=[i]);var u=this.matchOne(a,s,r);if(u)return t.flipNegate?!0:!this.negate}return t.flipNegate?!1:this.negate}N.prototype.matchOne=function(e,r,t){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var i=0,o=0,s=e.length,a=r.length;i<s&&o<a;i++,o++){this.debug("matchOne loop");var u=r[o],c=e[i];if(this.debug(r,u,c),u===!1)return!1;if(u===ct){this.debug("GLOBSTAR",[r,u,c]);var l=i,f=o+1;if(f===a){for(this.debug("** at the end");i<s;i++)if(e[i]==="."||e[i]===".."||!n.dot&&e[i].charAt(0)===".")return!1;return!0}for(;l<s;){var h=e[l];if(this.debug(`
globstar while`,e,l,r,f,h),this.matchOne(e.slice(l),r.slice(f),t))return this.debug("globstar found match!",l,s,h),!0;if(h==="."||h===".."||!n.dot&&h.charAt(0)==="."){this.debug("dot detected!",e,l,r,f);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(t&&(this.debug(`
>>> no match, partial?`,e,l,r,f),l===s))}var p;if(typeof u=="string"?(n.nocase?p=c.toLowerCase()===u.toLowerCase():p=c===u,this.debug("string match",u,c,p)):(p=c.match(u),this.debug("pattern match",u,c,p)),!p)return!1}if(i===s&&o===a)return!0;if(i===s)return t;if(o===a){var d=i===s-1&&e[i]==="";return d}throw new Error("wtf?")};function Hu(e){return e.replace(/\\(.)/g,"$1")}function Qu(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var bi=b((Lh,ht)=>{typeof Object.create=="function"?ht.exports=function(r,t){t&&(r.super_=t,r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:ht.exports=function(r,t){if(t){r.super_=t;var n=function(){};n.prototype=t.prototype,r.prototype=new n,r.prototype.constructor=r}}});var xi=b((Nh,dt)=>{try{if(pt=C("util"),typeof pt.inherits!="function")throw"";dt.exports=pt.inherits}catch(e){dt.exports=bi()}var pt});var Ar=b((Dh,Er)=>{"use strict";function wi(e){return e.charAt(0)==="/"}function Ci(e){var r=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,t=r.exec(e),n=t[1]||"",i=Boolean(n&&n.charAt(1)!==":");return Boolean(t[2]||i)}Er.exports=process.platform==="win32"?Ci:wi;Er.exports.posix=wi;Er.exports.win32=Ci});var gt=b(de=>{de.setopts=Zu;de.ownProp=_i;de.makeAbs=ze;de.finish=ec;de.mark=rc;de.isIgnored=Ai;de.childrenIgnored=tc;function _i(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var zu=C("fs"),Te=C("path"),Ku=_r(),Ei=Ar(),mt=Ku.Minimatch;function Vu(e,r){return e.localeCompare(r,"en")}function Xu(e,r){e.ignore=r.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(Ju))}function Ju(e){var r=null;if(e.slice(-3)==="/**"){var t=e.replace(/(\/\*\*)+$/,"");r=new mt(t,{dot:!0})}return{matcher:new mt(e,{dot:!0}),gmatcher:r}}function Zu(e,r,t){if(t||(t={}),t.matchBase&&r.indexOf("/")===-1){if(t.noglobstar)throw new Error("base matching requires globstar");r="**/"+r}e.silent=!!t.silent,e.pattern=r,e.strict=t.strict!==!1,e.realpath=!!t.realpath,e.realpathCache=t.realpathCache||Object.create(null),e.follow=!!t.follow,e.dot=!!t.dot,e.mark=!!t.mark,e.nodir=!!t.nodir,e.nodir&&(e.mark=!0),e.sync=!!t.sync,e.nounique=!!t.nounique,e.nonull=!!t.nonull,e.nosort=!!t.nosort,e.nocase=!!t.nocase,e.stat=!!t.stat,e.noprocess=!!t.noprocess,e.absolute=!!t.absolute,e.fs=t.fs||zu,e.maxLength=t.maxLength||Infinity,e.cache=t.cache||Object.create(null),e.statCache=t.statCache||Object.create(null),e.symlinks=t.symlinks||Object.create(null),Xu(e,t),e.changedCwd=!1;var n=process.cwd();_i(t,"cwd")?(e.cwd=Te.resolve(t.cwd),e.changedCwd=e.cwd!==n):e.cwd=n,e.root=t.root||Te.resolve(e.cwd,"/"),e.root=Te.resolve(e.root),process.platform==="win32"&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=Ei(e.cwd)?e.cwd:ze(e,e.cwd),process.platform==="win32"&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!t.nomount,t.nonegate=!0,t.nocomment=!0,e.minimatch=new mt(r,t),e.options=e.minimatch.options}function ec(e){for(var r=e.nounique,t=r?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var o=e.matches[n];if(!o||Object.keys(o).length===0){if(e.nonull){var s=e.minimatch.globSet[n];r?t.push(s):t[s]=!0}}else{var a=Object.keys(o);r?t.push.apply(t,a):a.forEach(function(u){t[u]=!0})}}if(r||(t=Object.keys(t)),e.nosort||(t=t.sort(Vu)),e.mark){for(var n=0;n<t.length;n++)t[n]=e._mark(t[n]);e.nodir&&(t=t.filter(function(u){var c=!/\/$/.test(u),l=e.cache[u]||e.cache[ze(e,u)];return c&&l&&(c=l!=="DIR"&&!Array.isArray(l)),c}))}e.ignore.length&&(t=t.filter(function(u){return!Ai(e,u)})),e.found=t}function rc(e,r){var t=ze(e,r),n=e.cache[t],i=r;if(n){var o=n==="DIR"||Array.isArray(n),s=r.slice(-1)==="/";if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==r){var a=ze(e,i);e.statCache[a]=e.statCache[t],e.cache[a]=e.cache[t]}}return i}function ze(e,r){var t=r;return r.charAt(0)==="/"?t=Te.join(e.root,r):Ei(r)||r===""?t=r:e.changedCwd?t=Te.resolve(e.cwd,r):t=Te.resolve(r),process.platform==="win32"&&(t=t.replace(/\\/g,"/")),t}function Ai(e,r){return e.ignore.length?e.ignore.some(function(t){return t.matcher.match(r)||!!(t.gmatcher&&t.gmatcher.match(r))}):!1}function tc(e,r){return e.ignore.length?e.ignore.some(function(t){return!!(t.gmatcher&&t.gmatcher.match(r))}):!1}});var Ri=b((qh,Pi)=>{Pi.exports=Ii;Ii.GlobSync=L;var nc=st(),ki=_r(),jh=ki.Minimatch,Bh=bt().Glob,$h=C("util"),yt=C("path"),Si=C("assert"),kr=Ar(),Ce=gt(),ic=Ce.setopts,vt=Ce.ownProp,oc=Ce.childrenIgnored,sc=Ce.isIgnored;function Ii(e,r){if(typeof r=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new L(e,r).found}function L(e,r){if(!e)throw new Error("must provide pattern");if(typeof r=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof L))return new L(e,r);if(ic(this,e,r),this.noprocess)return this;var t=this.minimatch.set.length;this.matches=new Array(t);for(var n=0;n<t;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}L.prototype._finish=function(){if(Si(this instanceof L),this.realpath){var e=this;this.matches.forEach(function(r,t){var n=e.matches[t]=Object.create(null);for(var i in r)try{i=e._makeAbs(i);var o=nc.realpathSync(i,e.realpathCache);n[o]=!0}catch(s){if(s.syscall==="stat")n[e._makeAbs(i)]=!0;else throw s}})}Ce.finish(this)};L.prototype._process=function(e,r,t){Si(this instanceof L);for(var n=0;typeof e[n]=="string";)n++;var i;switch(n){case e.length:this._processSimple(e.join("/"),r);return;case 0:i=null;break;default:i=e.slice(0,n).join("/");break}var o=e.slice(n),s;i===null?s=".":((kr(i)||kr(e.join("/")))&&(!i||!kr(i))&&(i="/"+i),s=i);var a=this._makeAbs(s);if(!oc(this,s)){var u=o[0]===ki.GLOBSTAR;u?this._processGlobStar(i,s,a,o,r,t):this._processReaddir(i,s,a,o,r,t)}};L.prototype._processReaddir=function(e,r,t,n,i,o){var s=this._readdir(t,o);if(!!s){for(var a=n[0],u=!!this.minimatch.negate,c=a._glob,l=this.dot||c.charAt(0)===".",f=[],h=0;h<s.length;h++){var p=s[h];if(p.charAt(0)!=="."||l){var d;u&&!e?d=!p.match(a):d=p.match(a),d&&f.push(p)}}var m=f.length;if(m!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var h=0;h<m;h++){var p=f[h];e&&(e.slice(-1)!=="/"?p=e+"/"+p:p=e+p),p.charAt(0)==="/"&&!this.nomount&&(p=yt.join(this.root,p)),this._emitMatch(i,p)}return}n.shift();for(var h=0;h<m;h++){var p=f[h],g;e?g=[e,p]:g=[p],this._process(g.concat(n),i,o)}}}};L.prototype._emitMatch=function(e,r){if(!sc(this,r)){var t=this._makeAbs(r);if(this.mark&&(r=this._mark(r)),this.absolute&&(r=t),!this.matches[e][r]){if(this.nodir){var n=this.cache[t];if(n==="DIR"||Array.isArray(n))return}this.matches[e][r]=!0,this.stat&&this._stat(r)}}};L.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var r,t,n;try{t=this.fs.lstatSync(e)}catch(o){if(o.code==="ENOENT")return null}var i=t&&t.isSymbolicLink();return this.symlinks[e]=i,!i&&t&&!t.isDirectory()?this.cache[e]="FILE":r=this._readdir(e,!1),r};L.prototype._readdir=function(e,r){var t;if(r&&!vt(this.symlinks,e))return this._readdirInGlobStar(e);if(vt(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(i){return this._readdirError(e,i),null}};L.prototype._readdirEntries=function(e,r){if(!this.mark&&!this.stat)for(var t=0;t<r.length;t++){var n=r[t];e==="/"?n=e+n:n=e+"/"+n,this.cache[n]=!0}return this.cache[e]=r,r};L.prototype._readdirError=function(e,r){switch(r.code){case"ENOTSUP":case"ENOTDIR":var t=this._makeAbs(e);if(this.cache[t]="FILE",t===this.cwdAbs){var n=new Error(r.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=r.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw r;this.silent||console.error("glob error",r);break}};L.prototype._processGlobStar=function(e,r,t,n,i,o){var s=this._readdir(t,o);if(!!s){var a=n.slice(1),u=e?[e]:[],c=u.concat(a);this._process(c,i,!1);var l=s.length,f=this.symlinks[t];if(!(f&&o))for(var h=0;h<l;h++){var p=s[h];if(!(p.charAt(0)==="."&&!this.dot)){var d=u.concat(s[h],a);this._process(d,i,!0);var m=u.concat(s[h],n);this._process(m,i,!0)}}}};L.prototype._processSimple=function(e,r){var t=this._stat(e);if(this.matches[r]||(this.matches[r]=Object.create(null)),!!t){if(e&&kr(e)&&!this.nomount){var n=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=yt.join(this.root,e):(e=yt.resolve(this.root,e),n&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e)}};L.prototype._stat=function(e){var r=this._makeAbs(e),t=e.slice(-1)==="/";if(e.length>this.maxLength)return!1;if(!this.stat&&vt(this.cache,r)){var s=this.cache[r];if(Array.isArray(s)&&(s="DIR"),!t||s==="DIR")return s;if(t&&s==="FILE")return!1}var n,i=this.statCache[r];if(!i){var o;try{o=this.fs.lstatSync(r)}catch(a){if(a&&(a.code==="ENOENT"||a.code==="ENOTDIR"))return this.statCache[r]=!1,!1}if(o&&o.isSymbolicLink())try{i=this.fs.statSync(r)}catch(a){i=o}else i=o}this.statCache[r]=i;var s=!0;return i&&(s=i.isDirectory()?"DIR":"FILE"),this.cache[r]=this.cache[r]||s,t&&s==="FILE"?!1:s};L.prototype._mark=function(e){return Ce.mark(this,e)};L.prototype._makeAbs=function(e){return Ce.makeAbs(this,e)}});var xt=b((Uh,Fi)=>{Fi.exports=Ti;function Ti(e,r){if(e&&r)return Ti(e)(r);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){t[n]=e[n]}),t;function t(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=e.apply(this,n),s=n[n.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(a){o[a]=s[a]}),o}}});var Ct=b((Wh,wt)=>{var Oi=xt();wt.exports=Oi(Sr);wt.exports.strict=Oi(Li);Sr.proto=Sr(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Sr(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Li(this)},configurable:!0})});function Sr(e){var r=function(){return r.called?r.value:(r.called=!0,r.value=e.apply(this,arguments))};return r.called=!1,r}function Li(e){var r=function(){if(r.called)throw new Error(r.onceError);return r.called=!0,r.value=e.apply(this,arguments)},t=e.name||"Function wrapped with `once`";return r.onceError=t+" shouldn't be called more than once",r.called=!1,r}});var Di=b((Gh,Ni)=>{var ac=xt(),Ke=Object.create(null),uc=Ct();Ni.exports=ac(cc);function cc(e,r){return Ke[e]?(Ke[e].push(r),null):(Ke[e]=[r],lc(e))}function lc(e){return uc(function r(){var t=Ke[e],n=t.length,i=fc(arguments);try{for(var o=0;o<n;o++)t[o].apply(null,i)}finally{t.length>n?(t.splice(0,n),process.nextTick(function(){r.apply(null,i)})):delete Ke[e]}})}function fc(e){for(var r=e.length,t=[],n=0;n<r;n++)t[n]=e[n];return t}});var bt=b((Qh,ji)=>{ji.exports=Ee;var hc=st(),Mi=_r(),Yh=Mi.Minimatch,pc=xi(),dc=C("events").EventEmitter,_t=C("path"),Et=C("assert"),Ve=Ar(),At=Ri(),_e=gt(),mc=_e.setopts,kt=_e.ownProp,St=Di(),Hh=C("util"),gc=_e.childrenIgnored,yc=_e.isIgnored,vc=Ct();function Ee(e,r,t){if(typeof r=="function"&&(t=r,r={}),r||(r={}),r.sync){if(t)throw new TypeError("callback provided to sync glob");return At(e,r)}return new I(e,r,t)}Ee.sync=At;var bc=Ee.GlobSync=At.GlobSync;Ee.glob=Ee;function xc(e,r){if(r===null||typeof r!="object")return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e}Ee.hasMagic=function(e,r){var t=xc({},r);t.noprocess=!0;var n=new I(e,t),i=n.minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var o=0;o<i[0].length;o++)if(typeof i[0][o]!="string")return!0;return!1};Ee.Glob=I;pc(I,dc);function I(e,r,t){if(typeof r=="function"&&(t=r,r=null),r&&r.sync){if(t)throw new TypeError("callback provided to sync glob");return new bc(e,r)}if(!(this instanceof I))return new I(e,r,t);mc(this,e,r),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof t=="function"&&(t=vc(t),this.on("error",t),this.on("end",function(u){t(null,u)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return a();for(var o=!0,s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,a);o=!1;function a(){--i._processing,i._processing<=0&&(o?process.nextTick(function(){i._finish()}):i._finish())}}I.prototype._finish=function(){if(Et(this instanceof I),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();_e.finish(this),this.emit("end",this.found)}};I.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var e=this.matches.length;if(e===0)return this._finish();for(var r=this,t=0;t<this.matches.length;t++)this._realpathSet(t,n);function n(){--e==0&&r._finish()}};I.prototype._realpathSet=function(e,r){var t=this.matches[e];if(!t)return r();var n=Object.keys(t),i=this,o=n.length;if(o===0)return r();var s=this.matches[e]=Object.create(null);n.forEach(function(a,u){a=i._makeAbs(a),hc.realpath(a,i.realpathCache,function(c,l){c?c.syscall==="stat"?s[a]=!0:i.emit("error",c):s[l]=!0,--o==0&&(i.matches[e]=s,r())})})};I.prototype._mark=function(e){return _e.mark(this,e)};I.prototype._makeAbs=function(e){return _e.makeAbs(this,e)};I.prototype.abort=function(){this.aborted=!0,this.emit("abort")};I.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};I.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var r=0;r<e.length;r++){var t=e[r];this._emitMatch(t[0],t[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var r=0;r<n.length;r++){var i=n[r];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};I.prototype._process=function(e,r,t,n){if(Et(this instanceof I),Et(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([e,r,t,n]);return}for(var i=0;typeof e[i]=="string";)i++;var o;switch(i){case e.length:this._processSimple(e.join("/"),r,n);return;case 0:o=null;break;default:o=e.slice(0,i).join("/");break}var s=e.slice(i),a;o===null?a=".":((Ve(o)||Ve(e.join("/")))&&(!o||!Ve(o))&&(o="/"+o),a=o);var u=this._makeAbs(a);if(gc(this,a))return n();var c=s[0]===Mi.GLOBSTAR;c?this._processGlobStar(o,a,u,s,r,t,n):this._processReaddir(o,a,u,s,r,t,n)}};I.prototype._processReaddir=function(e,r,t,n,i,o,s){var a=this;this._readdir(t,o,function(u,c){return a._processReaddir2(e,r,t,n,i,o,c,s)})};I.prototype._processReaddir2=function(e,r,t,n,i,o,s,a){if(!s)return a();for(var u=n[0],c=!!this.minimatch.negate,l=u._glob,f=this.dot||l.charAt(0)===".",h=[],p=0;p<s.length;p++){var d=s[p];if(d.charAt(0)!=="."||f){var m;c&&!e?m=!d.match(u):m=d.match(u),m&&h.push(d)}}var g=h.length;if(g===0)return a();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var p=0;p<g;p++){var d=h[p];e&&(e!=="/"?d=e+"/"+d:d=e+d),d.charAt(0)==="/"&&!this.nomount&&(d=_t.join(this.root,d)),this._emitMatch(i,d)}return a()}n.shift();for(var p=0;p<g;p++){var d=h[p],v;e&&(e!=="/"?d=e+"/"+d:d=e+d),this._process([d].concat(n),i,o,a)}a()};I.prototype._emitMatch=function(e,r){if(!this.aborted&&!yc(this,r)){if(this.paused){this._emitQueue.push([e,r]);return}var t=Ve(r)?r:this._makeAbs(r);if(this.mark&&(r=this._mark(r)),this.absolute&&(r=t),!this.matches[e][r]){if(this.nodir){var n=this.cache[t];if(n==="DIR"||Array.isArray(n))return}this.matches[e][r]=!0;var i=this.statCache[t];i&&this.emit("stat",r,i),this.emit("match",r)}}};I.prototype._readdirInGlobStar=function(e,r){if(this.aborted)return;if(this.follow)return this._readdir(e,!1,r);var t="lstat\0"+e,n=this,i=St(t,o);i&&n.fs.lstat(e,i);function o(s,a){if(s&&s.code==="ENOENT")return r();var u=a&&a.isSymbolicLink();n.symlinks[e]=u,!u&&a&&!a.isDirectory()?(n.cache[e]="FILE",r()):n._readdir(e,!1,r)}};I.prototype._readdir=function(e,r,t){if(!this.aborted&&(t=St("readdir\0"+e+"\0"+r,t),!!t)){if(r&&!kt(this.symlinks,e))return this._readdirInGlobStar(e,t);if(kt(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return t();if(Array.isArray(n))return t(null,n)}var i=this;i.fs.readdir(e,wc(this,e,t))}};function wc(e,r,t){return function(n,i){n?e._readdirError(r,n,t):e._readdirEntries(r,i,t)}}I.prototype._readdirEntries=function(e,r,t){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<r.length;n++){var i=r[n];e==="/"?i=e+i:i=e+"/"+i,this.cache[i]=!0}return this.cache[e]=r,t(null,r)}};I.prototype._readdirError=function(e,r,t){if(!this.aborted){switch(r.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(r.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=r.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",r),this.abort()),this.silent||console.error("glob error",r);break}return t()}};I.prototype._processGlobStar=function(e,r,t,n,i,o,s){var a=this;this._readdir(t,o,function(u,c){a._processGlobStar2(e,r,t,n,i,o,c,s)})};I.prototype._processGlobStar2=function(e,r,t,n,i,o,s,a){if(!s)return a();var u=n.slice(1),c=e?[e]:[],l=c.concat(u);this._process(l,i,!1,a);var f=this.symlinks[t],h=s.length;if(f&&o)return a();for(var p=0;p<h;p++){var d=s[p];if(!(d.charAt(0)==="."&&!this.dot)){var m=c.concat(s[p],u);this._process(m,i,!0,a);var g=c.concat(s[p],n);this._process(g,i,!0,a)}}a()};I.prototype._processSimple=function(e,r,t){var n=this;this._stat(e,function(i,o){n._processSimple2(e,r,i,o,t)})};I.prototype._processSimple2=function(e,r,t,n,i){if(this.matches[r]||(this.matches[r]=Object.create(null)),!n)return i();if(e&&Ve(e)&&!this.nomount){var o=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=_t.join(this.root,e):(e=_t.resolve(this.root,e),o&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e),i()};I.prototype._stat=function(e,r){var t=this._makeAbs(e),n=e.slice(-1)==="/";if(e.length>this.maxLength)return r();if(!this.stat&&kt(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return r(null,i);if(n&&i==="FILE")return r()}var o,s=this.statCache[t];if(s!==void 0){if(s===!1)return r(null,s);var a=s.isDirectory()?"DIR":"FILE";return n&&a==="FILE"?r():r(null,a,s)}var u=this,c=St("stat\0"+t,l);c&&u.fs.lstat(t,c);function l(f,h){if(h&&h.isSymbolicLink())return u.fs.stat(t,function(p,d){p?u._stat2(e,t,null,h,r):u._stat2(e,t,p,d,r)});u._stat2(e,t,f,h,r)}};I.prototype._stat2=function(e,r,t,n,i){if(t&&(t.code==="ENOENT"||t.code==="ENOTDIR"))return this.statCache[r]=!1,i();var o=e.slice(-1)==="/";if(this.statCache[r]=n,r.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[r]=this.cache[r]||s,o&&s==="FILE"?i():i(null,s,n)}});var $i=b((zh,Ae)=>{var Xe=bt(),Bi=function(e,r){return new Promise((t,n)=>{Xe(e,r,(i,o)=>i===null?t(o):n(i))})};Ae.exports=Bi;Ae.exports.glob=Xe;Ae.exports.Glob=Xe.Glob;Ae.exports.hasMagic=Xe.hasMagic;Ae.exports.promise=Bi;Ae.exports.sync=Xe.sync});var Fe=b((ap,ke)=>{"use strict";function Hi(e){return typeof e=="undefined"||e===null}function Ec(e){return typeof e=="object"&&e!==null}function Ac(e){return Array.isArray(e)?e:Hi(e)?[]:[e]}function kc(e,r){var t,n,i,o;if(r)for(o=Object.keys(r),t=0,n=o.length;t<n;t+=1)i=o[t],e[i]=r[i];return e}function Sc(e,r){var t="",n;for(n=0;n<r;n+=1)t+=e;return t}function Ic(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}ke.exports.isNothing=Hi;ke.exports.isObject=Ec;ke.exports.toArray=Ac;ke.exports.repeat=Sc;ke.exports.isNegativeZero=Ic;ke.exports.extend=kc});var Oe=b((up,zi)=>{"use strict";function Qi(e,r){var t="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(t+='in "'+e.mark.name+'" '),t+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!r&&e.mark.snippet&&(t+=`

`+e.mark.snippet),n+" "+t):n}function Je(e,r){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=r,this.message=Qi(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Je.prototype=Object.create(Error.prototype);Je.prototype.constructor=Je;Je.prototype.toString=function(r){return this.name+": "+Qi(this,r)};zi.exports=Je});var Vi=b((cp,Ki)=>{"use strict";var Ze=Fe();function Pt(e,r,t,n,i){var o="",s="",a=Math.floor(i/2)-1;return n-r>a&&(o=" ... ",r=n-a+o.length),t-n>a&&(s=" ...",t=n+a-s.length),{str:o+e.slice(r,t).replace(/\t/g,"\u2192")+s,pos:n-r+o.length}}function Rt(e,r){return Ze.repeat(" ",r-e.length)+e}function Pc(e,r){if(r=Object.create(r||null),!e.buffer)return null;r.maxLength||(r.maxLength=79),typeof r.indent!="number"&&(r.indent=1),typeof r.linesBefore!="number"&&(r.linesBefore=3),typeof r.linesAfter!="number"&&(r.linesAfter=2);for(var t=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=t.exec(e.buffer);)i.push(o.index),n.push(o.index+o[0].length),e.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",u,c,l=Math.min(e.line+r.linesAfter,i.length).toString().length,f=r.maxLength-(r.indent+l+3);for(u=1;u<=r.linesBefore&&!(s-u<0);u++)c=Pt(e.buffer,n[s-u],i[s-u],e.position-(n[s]-n[s-u]),f),a=Ze.repeat(" ",r.indent)+Rt((e.line-u+1).toString(),l)+" | "+c.str+`
`+a;for(c=Pt(e.buffer,n[s],i[s],e.position,f),a+=Ze.repeat(" ",r.indent)+Rt((e.line+1).toString(),l)+" | "+c.str+`
`,a+=Ze.repeat("-",r.indent+l+3+c.pos)+`^
`,u=1;u<=r.linesAfter&&!(s+u>=i.length);u++)c=Pt(e.buffer,n[s+u],i[s+u],e.position-(n[s]-n[s+u]),f),a+=Ze.repeat(" ",r.indent)+Rt((e.line+u+1).toString(),l)+" | "+c.str+`
`;return a.replace(/\n$/,"")}Ki.exports=Pc});var D=b((lp,Ji)=>{"use strict";var Xi=Oe(),Rc=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Tc=["scalar","sequence","mapping"];function Fc(e){var r={};return e!==null&&Object.keys(e).forEach(function(t){e[t].forEach(function(n){r[String(n)]=t})}),r}function Oc(e,r){if(r=r||{},Object.keys(r).forEach(function(t){if(Rc.indexOf(t)===-1)throw new Xi('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=r,this.tag=e,this.kind=r.kind||null,this.resolve=r.resolve||function(){return!0},this.construct=r.construct||function(t){return t},this.instanceOf=r.instanceOf||null,this.predicate=r.predicate||null,this.represent=r.represent||null,this.representName=r.representName||null,this.defaultStyle=r.defaultStyle||null,this.multi=r.multi||!1,this.styleAliases=Fc(r.styleAliases||null),Tc.indexOf(this.kind)===-1)throw new Xi('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}Ji.exports=Oc});var Ot=b((fp,eo)=>{"use strict";var er=Oe(),Tt=D();function Zi(e,r){var t=[];return e[r].forEach(function(n){var i=t.length;t.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),t[i]=n}),t}function Lc(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},r,t;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(r=0,t=arguments.length;r<t;r+=1)arguments[r].forEach(n);return e}function Ft(e){return this.extend(e)}Ft.prototype.extend=function(r){var t=[],n=[];if(r instanceof Tt)n.push(r);else if(Array.isArray(r))n=n.concat(r);else if(r&&(Array.isArray(r.implicit)||Array.isArray(r.explicit)))r.implicit&&(t=t.concat(r.implicit)),r.explicit&&(n=n.concat(r.explicit));else throw new er("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(o){if(!(o instanceof Tt))throw new er("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new er("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new er("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Tt))throw new er("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Ft.prototype);return i.implicit=(this.implicit||[]).concat(t),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Zi(i,"implicit"),i.compiledExplicit=Zi(i,"explicit"),i.compiledTypeMap=Lc(i.compiledImplicit,i.compiledExplicit),i};eo.exports=Ft});var Lt=b((hp,ro)=>{"use strict";var Nc=D();ro.exports=new Nc("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}})});var Nt=b((pp,to)=>{"use strict";var Dc=D();to.exports=new Dc("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}})});var Dt=b((dp,no)=>{"use strict";var Mc=D();no.exports=new Mc("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}})});var Mt=b((mp,io)=>{"use strict";var jc=Ot();io.exports=new jc({explicit:[Lt(),Nt(),Dt()]})});var jt=b((gp,oo)=>{"use strict";var Bc=D();function $c(e){if(e===null)return!0;var r=e.length;return r===1&&e==="~"||r===4&&(e==="null"||e==="Null"||e==="NULL")}function qc(){return null}function Uc(e){return e===null}oo.exports=new Bc("tag:yaml.org,2002:null",{kind:"scalar",resolve:$c,construct:qc,predicate:Uc,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"})});var Bt=b((yp,so)=>{"use strict";var Wc=D();function Gc(e){if(e===null)return!1;var r=e.length;return r===4&&(e==="true"||e==="True"||e==="TRUE")||r===5&&(e==="false"||e==="False"||e==="FALSE")}function Yc(e){return e==="true"||e==="True"||e==="TRUE"}function Hc(e){return Object.prototype.toString.call(e)==="[object Boolean]"}so.exports=new Wc("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Gc,construct:Yc,predicate:Hc,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})});var $t=b((vp,ao)=>{"use strict";var Qc=Fe(),zc=D();function Kc(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Vc(e){return 48<=e&&e<=55}function Xc(e){return 48<=e&&e<=57}function Jc(e){if(e===null)return!1;var r=e.length,t=0,n=!1,i;if(!r)return!1;if(i=e[t],(i==="-"||i==="+")&&(i=e[++t]),i==="0"){if(t+1===r)return!0;if(i=e[++t],i==="b"){for(t++;t<r;t++)if(i=e[t],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(t++;t<r;t++)if(i=e[t],i!=="_"){if(!Kc(e.charCodeAt(t)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(t++;t<r;t++)if(i=e[t],i!=="_"){if(!Vc(e.charCodeAt(t)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;t<r;t++)if(i=e[t],i!=="_"){if(!Xc(e.charCodeAt(t)))return!1;n=!0}return!(!n||i==="_")}function Zc(e){var r=e,t=1,n;if(r.indexOf("_")!==-1&&(r=r.replace(/_/g,"")),n=r[0],(n==="-"||n==="+")&&(n==="-"&&(t=-1),r=r.slice(1),n=r[0]),r==="0")return 0;if(n==="0"){if(r[1]==="b")return t*parseInt(r.slice(2),2);if(r[1]==="x")return t*parseInt(r.slice(2),16);if(r[1]==="o")return t*parseInt(r.slice(2),8)}return t*parseInt(r,10)}function el(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1==0&&!Qc.isNegativeZero(e)}ao.exports=new zc("tag:yaml.org,2002:int",{kind:"scalar",resolve:Jc,construct:Zc,predicate:el,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})});var qt=b((bp,co)=>{"use strict";var uo=Fe(),rl=D(),tl=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function nl(e){return!(e===null||!tl.test(e)||e[e.length-1]==="_")}function il(e){var r,t;return r=e.replace(/_/g,"").toLowerCase(),t=r[0]==="-"?-1:1,"+-".indexOf(r[0])>=0&&(r=r.slice(1)),r===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:r===".nan"?NaN:t*parseFloat(r,10)}var ol=/^[-+]?[0-9]+e/;function sl(e,r){var t;if(isNaN(e))switch(r){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(r){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(r){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(uo.isNegativeZero(e))return"-0.0";return t=e.toString(10),ol.test(t)?t.replace("e",".e"):t}function al(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!=0||uo.isNegativeZero(e))}co.exports=new rl("tag:yaml.org,2002:float",{kind:"scalar",resolve:nl,construct:il,predicate:al,represent:sl,defaultStyle:"lowercase"})});var Ut=b((xp,lo)=>{"use strict";lo.exports=Mt().extend({implicit:[jt(),Bt(),$t(),qt()]})});var Wt=b((wp,fo)=>{"use strict";fo.exports=Ut()});var Gt=b((Cp,mo)=>{"use strict";var ul=D(),ho=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),po=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function cl(e){return e===null?!1:ho.exec(e)!==null||po.exec(e)!==null}function ll(e){var r,t,n,i,o,s,a,u=0,c=null,l,f,h;if(r=ho.exec(e),r===null&&(r=po.exec(e)),r===null)throw new Error("Date resolve error");if(t=+r[1],n=+r[2]-1,i=+r[3],!r[4])return new Date(Date.UTC(t,n,i));if(o=+r[4],s=+r[5],a=+r[6],r[7]){for(u=r[7].slice(0,3);u.length<3;)u+="0";u=+u}return r[9]&&(l=+r[10],f=+(r[11]||0),c=(l*60+f)*6e4,r[9]==="-"&&(c=-c)),h=new Date(Date.UTC(t,n,i,o,s,a,u)),c&&h.setTime(h.getTime()-c),h}function fl(e){return e.toISOString()}mo.exports=new ul("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:cl,construct:ll,instanceOf:Date,represent:fl})});var Yt=b((_p,go)=>{"use strict";var hl=D();function pl(e){return e==="<<"||e===null}go.exports=new hl("tag:yaml.org,2002:merge",{kind:"scalar",resolve:pl})});var Qt=b((Ep,yo)=>{"use strict";var dl=D(),Ht=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function ml(e){if(e===null)return!1;var r,t,n=0,i=e.length,o=Ht;for(t=0;t<i;t++)if(r=o.indexOf(e.charAt(t)),!(r>64)){if(r<0)return!1;n+=6}return n%8==0}function gl(e){var r,t,n=e.replace(/[\r\n=]/g,""),i=n.length,o=Ht,s=0,a=[];for(r=0;r<i;r++)r%4==0&&r&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(n.charAt(r));return t=i%4*6,t===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):t===18?(a.push(s>>10&255),a.push(s>>2&255)):t===12&&a.push(s>>4&255),new Uint8Array(a)}function yl(e){var r="",t=0,n,i,o=e.length,s=Ht;for(n=0;n<o;n++)n%3==0&&n&&(r+=s[t>>18&63],r+=s[t>>12&63],r+=s[t>>6&63],r+=s[t&63]),t=(t<<8)+e[n];return i=o%3,i===0?(r+=s[t>>18&63],r+=s[t>>12&63],r+=s[t>>6&63],r+=s[t&63]):i===2?(r+=s[t>>10&63],r+=s[t>>4&63],r+=s[t<<2&63],r+=s[64]):i===1&&(r+=s[t>>2&63],r+=s[t<<4&63],r+=s[64],r+=s[64]),r}function vl(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}yo.exports=new dl("tag:yaml.org,2002:binary",{kind:"scalar",resolve:ml,construct:gl,predicate:vl,represent:yl})});var zt=b((Ap,vo)=>{"use strict";var bl=D(),xl=Object.prototype.hasOwnProperty,wl=Object.prototype.toString;function Cl(e){if(e===null)return!0;var r=[],t,n,i,o,s,a=e;for(t=0,n=a.length;t<n;t+=1){if(i=a[t],s=!1,wl.call(i)!=="[object Object]")return!1;for(o in i)if(xl.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(r.indexOf(o)===-1)r.push(o);else return!1}return!0}function _l(e){return e!==null?e:[]}vo.exports=new bl("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Cl,construct:_l})});var Kt=b((kp,bo)=>{"use strict";var El=D(),Al=Object.prototype.toString;function kl(e){if(e===null)return!0;var r,t,n,i,o,s=e;for(o=new Array(s.length),r=0,t=s.length;r<t;r+=1){if(n=s[r],Al.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[r]=[i[0],n[i[0]]]}return!0}function Sl(e){if(e===null)return[];var r,t,n,i,o,s=e;for(o=new Array(s.length),r=0,t=s.length;r<t;r+=1)n=s[r],i=Object.keys(n),o[r]=[i[0],n[i[0]]];return o}bo.exports=new El("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:kl,construct:Sl})});var Vt=b((Sp,xo)=>{"use strict";var Il=D(),Pl=Object.prototype.hasOwnProperty;function Rl(e){if(e===null)return!0;var r,t=e;for(r in t)if(Pl.call(t,r)&&t[r]!==null)return!1;return!0}function Tl(e){return e!==null?e:{}}xo.exports=new Il("tag:yaml.org,2002:set",{kind:"mapping",resolve:Rl,construct:Tl})});var Pr=b((Ip,wo)=>{"use strict";wo.exports=Wt().extend({implicit:[Gt(),Yt()],explicit:[Qt(),zt(),Kt(),Vt()]})});var Mo=b((Pp,en)=>{"use strict";var Se=Fe(),Co=Oe(),Fl=Vi(),Ol=Pr(),me=Object.prototype.hasOwnProperty,Rr=1,_o=2,Eo=3,Tr=4,Xt=1,Ll=2,Ao=3,Nl=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Dl=/[\x85\u2028\u2029]/,Ml=/[,\[\]\{\}]/,ko=/^(?:!|!!|![a-z\-]+!)$/i,So=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Io(e){return Object.prototype.toString.call(e)}function te(e){return e===10||e===13}function Ie(e){return e===9||e===32}function U(e){return e===9||e===32||e===10||e===13}function Le(e){return e===44||e===91||e===93||e===123||e===125}function jl(e){var r;return 48<=e&&e<=57?e-48:(r=e|32,97<=r&&r<=102?r-97+10:-1)}function Bl(e){return e===120?2:e===117?4:e===85?8:0}function $l(e){return 48<=e&&e<=57?e-48:-1}function Po(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function ql(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Ro=new Array(256),To=new Array(256);for(var Ne=0;Ne<256;Ne++)Ro[Ne]=Po(Ne)?1:0,To[Ne]=Po(Ne);function Ul(e,r){this.input=e,this.filename=r.filename||null,this.schema=r.schema||Ol,this.onWarning=r.onWarning||null,this.legacy=r.legacy||!1,this.json=r.json||!1,this.listener=r.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Fo(e,r){var t={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return t.snippet=Fl(t),new Co(r,t)}function w(e,r){throw Fo(e,r)}function Fr(e,r){e.onWarning&&e.onWarning.call(null,Fo(e,r))}var Oo={YAML:function(r,t,n){var i,o,s;r.version!==null&&w(r,"duplication of %YAML directive"),n.length!==1&&w(r,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&w(r,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&w(r,"unacceptable YAML version of the document"),r.version=n[0],r.checkLineBreaks=s<2,s!==1&&s!==2&&Fr(r,"unsupported YAML version of the document")},TAG:function(r,t,n){var i,o;n.length!==2&&w(r,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],ko.test(i)||w(r,"ill-formed tag handle (first argument) of the TAG directive"),me.call(r.tagMap,i)&&w(r,'there is a previously declared suffix for "'+i+'" tag handle'),So.test(o)||w(r,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch(s){w(r,"tag prefix is malformed: "+o)}r.tagMap[i]=o}};function ge(e,r,t,n){var i,o,s,a;if(r<t){if(a=e.input.slice(r,t),n)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||w(e,"expected valid JSON character");else Nl.test(a)&&w(e,"the stream contains non-printable characters");e.result+=a}}function Lo(e,r,t,n){var i,o,s,a;for(Se.isObject(t)||w(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(t),s=0,a=i.length;s<a;s+=1)o=i[s],me.call(r,o)||(r[o]=t[o],n[o]=!0)}function De(e,r,t,n,i,o,s,a,u){var c,l;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,l=i.length;c<l;c+=1)Array.isArray(i[c])&&w(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Io(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&Io(i)==="[object Object]"&&(i="[object Object]"),i=String(i),r===null&&(r={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(c=0,l=o.length;c<l;c+=1)Lo(e,r,o[c],t);else Lo(e,r,o,t);else!e.json&&!me.call(t,i)&&me.call(r,i)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=u||e.position,w(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(r,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):r[i]=o,delete t[i];return r}function Jt(e){var r;r=e.input.charCodeAt(e.position),r===10?e.position++:r===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):w(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function O(e,r,t){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Ie(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(r&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(te(i))for(Jt(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return t!==-1&&n!==0&&e.lineIndent<t&&Fr(e,"deficient indentation"),n}function Or(e){var r=e.position,t;return t=e.input.charCodeAt(r),!!((t===45||t===46)&&t===e.input.charCodeAt(r+1)&&t===e.input.charCodeAt(r+2)&&(r+=3,t=e.input.charCodeAt(r),t===0||U(t)))}function Zt(e,r){r===1?e.result+=" ":r>1&&(e.result+=Se.repeat(`
`,r-1))}function Wl(e,r,t){var n,i,o,s,a,u,c,l,f=e.kind,h=e.result,p;if(p=e.input.charCodeAt(e.position),U(p)||Le(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=e.input.charCodeAt(e.position+1),U(i)||t&&Le(i)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,a=!1;p!==0;){if(p===58){if(i=e.input.charCodeAt(e.position+1),U(i)||t&&Le(i))break}else if(p===35){if(n=e.input.charCodeAt(e.position-1),U(n))break}else{if(e.position===e.lineStart&&Or(e)||t&&Le(p))break;if(te(p))if(u=e.line,c=e.lineStart,l=e.lineIndent,O(e,!1,-1),e.lineIndent>=r){a=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=u,e.lineStart=c,e.lineIndent=l;break}}a&&(ge(e,o,s,!1),Zt(e,e.line-u),o=s=e.position,a=!1),Ie(p)||(s=e.position+1),p=e.input.charCodeAt(++e.position)}return ge(e,o,s,!1),e.result?!0:(e.kind=f,e.result=h,!1)}function Gl(e,r){var t,n,i;if(t=e.input.charCodeAt(e.position),t!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(t=e.input.charCodeAt(e.position))!==0;)if(t===39)if(ge(e,n,e.position,!0),t=e.input.charCodeAt(++e.position),t===39)n=e.position,e.position++,i=e.position;else return!0;else te(t)?(ge(e,n,i,!0),Zt(e,O(e,!1,r)),n=i=e.position):e.position===e.lineStart&&Or(e)?w(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);w(e,"unexpected end of the stream within a single quoted scalar")}function Yl(e,r){var t,n,i,o,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,t=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return ge(e,t,e.position,!0),e.position++,!0;if(a===92){if(ge(e,t,e.position,!0),a=e.input.charCodeAt(++e.position),te(a))O(e,!1,r);else if(a<256&&Ro[a])e.result+=To[a],e.position++;else if((s=Bl(a))>0){for(i=s,o=0;i>0;i--)a=e.input.charCodeAt(++e.position),(s=jl(a))>=0?o=(o<<4)+s:w(e,"expected hexadecimal character");e.result+=ql(o),e.position++}else w(e,"unknown escape sequence");t=n=e.position}else te(a)?(ge(e,t,n,!0),Zt(e,O(e,!1,r)),t=n=e.position):e.position===e.lineStart&&Or(e)?w(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}w(e,"unexpected end of the stream within a double quoted scalar")}function Hl(e,r){var t=!0,n,i,o,s=e.tag,a,u=e.anchor,c,l,f,h,p,d=Object.create(null),m,g,v,y;if(y=e.input.charCodeAt(e.position),y===91)l=93,p=!1,a=[];else if(y===123)l=125,p=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),y=e.input.charCodeAt(++e.position);y!==0;){if(O(e,!0,r),y=e.input.charCodeAt(e.position),y===l)return e.position++,e.tag=s,e.anchor=u,e.kind=p?"mapping":"sequence",e.result=a,!0;t?y===44&&w(e,"expected the node content, but found ','"):w(e,"missed comma between flow collection entries"),g=m=v=null,f=h=!1,y===63&&(c=e.input.charCodeAt(e.position+1),U(c)&&(f=h=!0,e.position++,O(e,!0,r))),n=e.line,i=e.lineStart,o=e.position,Me(e,r,Rr,!1,!0),g=e.tag,m=e.result,O(e,!0,r),y=e.input.charCodeAt(e.position),(h||e.line===n)&&y===58&&(f=!0,y=e.input.charCodeAt(++e.position),O(e,!0,r),Me(e,r,Rr,!1,!0),v=e.result),p?De(e,a,d,g,m,v,n,i,o):f?a.push(De(e,null,d,g,m,v,n,i,o)):a.push(m),O(e,!0,r),y=e.input.charCodeAt(e.position),y===44?(t=!0,y=e.input.charCodeAt(++e.position)):t=!1}w(e,"unexpected end of the stream within a flow collection")}function Ql(e,r){var t,n,i=Xt,o=!1,s=!1,a=r,u=0,c=!1,l,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)Xt===i?i=f===43?Ao:Ll:w(e,"repeat of a chomping mode identifier");else if((l=$l(f))>=0)l===0?w(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?w(e,"repeat of an indentation width identifier"):(a=r+l-1,s=!0);else break;if(Ie(f)){do f=e.input.charCodeAt(++e.position);while(Ie(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!te(f)&&f!==0)}for(;f!==0;){for(Jt(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),te(f)){u++;continue}if(e.lineIndent<a){i===Ao?e.result+=Se.repeat(`
`,o?1+u:u):i===Xt&&o&&(e.result+=`
`);break}for(n?Ie(f)?(c=!0,e.result+=Se.repeat(`
`,o?1+u:u)):c?(c=!1,e.result+=Se.repeat(`
`,u+1)):u===0?o&&(e.result+=" "):e.result+=Se.repeat(`
`,u):e.result+=Se.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,t=e.position;!te(f)&&f!==0;)f=e.input.charCodeAt(++e.position);ge(e,t,e.position,!1)}return!0}function No(e,r){var t,n=e.tag,i=e.anchor,o=[],s,a=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,w(e,"tab characters must not be used in indentation")),!(u!==45||(s=e.input.charCodeAt(e.position+1),!U(s))));){if(a=!0,e.position++,O(e,!0,-1)&&e.lineIndent<=r){o.push(null),u=e.input.charCodeAt(e.position);continue}if(t=e.line,Me(e,r,Eo,!1,!0),o.push(e.result),O(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===t||e.lineIndent>r)&&u!==0)w(e,"bad indentation of a sequence entry");else if(e.lineIndent<r)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function zl(e,r,t){var n,i,o,s,a,u,c=e.tag,l=e.anchor,f={},h=Object.create(null),p=null,d=null,m=null,g=!1,v=!1,y;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),y=e.input.charCodeAt(e.position);y!==0;){if(!g&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,w(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),o=e.line,(y===63||y===58)&&U(n))y===63?(g&&(De(e,f,h,p,d,null,s,a,u),p=d=m=null),v=!0,g=!0,i=!0):g?(g=!1,i=!0):w(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,y=n;else{if(s=e.line,a=e.lineStart,u=e.position,!Me(e,t,_o,!1,!0))break;if(e.line===o){for(y=e.input.charCodeAt(e.position);Ie(y);)y=e.input.charCodeAt(++e.position);if(y===58)y=e.input.charCodeAt(++e.position),U(y)||w(e,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(De(e,f,h,p,d,null,s,a,u),p=d=m=null),v=!0,g=!1,i=!1,p=e.tag,d=e.result;else if(v)w(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=l,!0}else if(v)w(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=l,!0}if((e.line===o||e.lineIndent>r)&&(g&&(s=e.line,a=e.lineStart,u=e.position),Me(e,r,Tr,!0,i)&&(g?d=e.result:m=e.result),g||(De(e,f,h,p,d,m,s,a,u),p=d=m=null),O(e,!0,-1),y=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>r)&&y!==0)w(e,"bad indentation of a mapping entry");else if(e.lineIndent<r)break}return g&&De(e,f,h,p,d,null,s,a,u),v&&(e.tag=c,e.anchor=l,e.kind="mapping",e.result=f),v}function Kl(e){var r,t=!1,n=!1,i,o,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&w(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(t=!0,s=e.input.charCodeAt(++e.position)):s===33?(n=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",r=e.position,t){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(o=e.input.slice(r,e.position),s=e.input.charCodeAt(++e.position)):w(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!U(s);)s===33&&(n?w(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(r-1,e.position+1),ko.test(i)||w(e,"named tag handle cannot contain such characters"),n=!0,r=e.position+1)),s=e.input.charCodeAt(++e.position);o=e.input.slice(r,e.position),Ml.test(o)&&w(e,"tag suffix cannot contain flow indicator characters")}o&&!So.test(o)&&w(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch(a){w(e,"tag name is malformed: "+o)}return t?e.tag=o:me.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:w(e,'undeclared tag handle "'+i+'"'),!0}function Vl(e){var r,t;if(t=e.input.charCodeAt(e.position),t!==38)return!1;for(e.anchor!==null&&w(e,"duplication of an anchor property"),t=e.input.charCodeAt(++e.position),r=e.position;t!==0&&!U(t)&&!Le(t);)t=e.input.charCodeAt(++e.position);return e.position===r&&w(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(r,e.position),!0}function Xl(e){var r,t,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),r=e.position;n!==0&&!U(n)&&!Le(n);)n=e.input.charCodeAt(++e.position);return e.position===r&&w(e,"name of an alias node must contain at least one character"),t=e.input.slice(r,e.position),me.call(e.anchorMap,t)||w(e,'unidentified alias "'+t+'"'),e.result=e.anchorMap[t],O(e,!0,-1),!0}function Me(e,r,t,n,i){var o,s,a,u=1,c=!1,l=!1,f,h,p,d,m,g;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=Tr===t||Eo===t,n&&O(e,!0,-1)&&(c=!0,e.lineIndent>r?u=1:e.lineIndent===r?u=0:e.lineIndent<r&&(u=-1)),u===1)for(;Kl(e)||Vl(e);)O(e,!0,-1)?(c=!0,a=o,e.lineIndent>r?u=1:e.lineIndent===r?u=0:e.lineIndent<r&&(u=-1)):a=!1;if(a&&(a=c||i),(u===1||Tr===t)&&(Rr===t||_o===t?m=r:m=r+1,g=e.position-e.lineStart,u===1?a&&(No(e,g)||zl(e,g,m))||Hl(e,m)?l=!0:(s&&Ql(e,m)||Gl(e,m)||Yl(e,m)?l=!0:Xl(e)?(l=!0,(e.tag!==null||e.anchor!==null)&&w(e,"alias node should not have any properties")):Wl(e,m,Rr===t)&&(l=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(l=a&&No(e,g))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&w(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,h=e.implicitTypes.length;f<h;f+=1)if(d=e.implicitTypes[f],d.resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(me.call(e.typeMap[e.kind||"fallback"],e.tag))d=e.typeMap[e.kind||"fallback"][e.tag];else for(d=null,p=e.typeMap.multi[e.kind||"fallback"],f=0,h=p.length;f<h;f+=1)if(e.tag.slice(0,p[f].tag.length)===p[f].tag){d=p[f];break}d||w(e,"unknown tag !<"+e.tag+">"),e.result!==null&&d.kind!==e.kind&&w(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result,e.tag)?(e.result=d.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):w(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||l}function Jl(e){var r=e.position,t,n,i,o=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(O(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(o=!0,s=e.input.charCodeAt(++e.position),t=e.position;s!==0&&!U(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(t,e.position),i=[],n.length<1&&w(e,"directive name must not be less than one character in length");s!==0;){for(;Ie(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!te(s));break}if(te(s))break;for(t=e.position;s!==0&&!U(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(t,e.position))}s!==0&&Jt(e),me.call(Oo,n)?Oo[n](e,n,i):Fr(e,'unknown document directive "'+n+'"')}if(O(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,O(e,!0,-1)):o&&w(e,"directives end mark is expected"),Me(e,e.lineIndent-1,Tr,!1,!0),O(e,!0,-1),e.checkLineBreaks&&Dl.test(e.input.slice(r,e.position))&&Fr(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Or(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,O(e,!0,-1));return}if(e.position<e.length-1)w(e,"end of the stream or a document separator is expected");else return}function Do(e,r){e=String(e),r=r||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var t=new Ul(e,r),n=e.indexOf("\0");for(n!==-1&&(t.position=n,w(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)Jl(t);return t.documents}function Zl(e,r,t){r!==null&&typeof r=="object"&&typeof t=="undefined"&&(t=r,r=null);var n=Do(e,t);if(typeof r!="function")return n;for(var i=0,o=n.length;i<o;i+=1)r(n[i])}function ef(e,r){var t=Do(e,r);if(t.length!==0){if(t.length===1)return t[0];throw new Co("expected a single document in the stream, but found more")}}en.exports.loadAll=Zl;en.exports.load=ef});var is=b((Rp,ns)=>{"use strict";var Lr=Fe(),rr=Oe(),rf=Pr(),jo=Object.prototype.toString,Bo=Object.prototype.hasOwnProperty,rn=65279,tf=9,tr=10,nf=13,of=32,sf=33,af=34,tn=35,uf=37,cf=38,lf=39,ff=42,$o=44,hf=45,Nr=58,pf=61,df=62,mf=63,gf=64,qo=91,Uo=93,yf=96,Wo=123,vf=124,Go=125,M={};M[0]="\\0";M[7]="\\a";M[8]="\\b";M[9]="\\t";M[10]="\\n";M[11]="\\v";M[12]="\\f";M[13]="\\r";M[27]="\\e";M[34]='\\"';M[92]="\\\\";M[133]="\\N";M[160]="\\_";M[8232]="\\L";M[8233]="\\P";var bf=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],xf=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function wf(e,r){var t,n,i,o,s,a,u;if(r===null)return{};for(t={},n=Object.keys(r),i=0,o=n.length;i<o;i+=1)s=n[i],a=String(r[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=e.compiledTypeMap.fallback[s],u&&Bo.call(u.styleAliases,a)&&(a=u.styleAliases[a]),t[s]=a;return t}function Cf(e){var r,t,n;if(r=e.toString(16).toUpperCase(),e<=255)t="x",n=2;else if(e<=65535)t="u",n=4;else if(e<=4294967295)t="U",n=8;else throw new rr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+Lr.repeat("0",n-r.length)+r}var _f=1,nr=2;function Ef(e){this.schema=e.schema||rf,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Lr.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=wf(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?nr:_f,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Yo(e,r){for(var t=Lr.repeat(" ",r),n=0,i=-1,o="",s,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(s=e.slice(n),n=a):(s=e.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=t),o+=s;return o}function nn(e,r){return`
`+Lr.repeat(" ",e.indent*r)}function Af(e,r){var t,n,i;for(t=0,n=e.implicitTypes.length;t<n;t+=1)if(i=e.implicitTypes[t],i.resolve(r))return!0;return!1}function Dr(e){return e===of||e===tf}function ir(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==rn||65536<=e&&e<=1114111}function Ho(e){return ir(e)&&e!==rn&&e!==nf&&e!==tr}function Qo(e,r,t){var n=Ho(e),i=n&&!Dr(e);return(t?n:n&&e!==$o&&e!==qo&&e!==Uo&&e!==Wo&&e!==Go)&&e!==tn&&!(r===Nr&&!i)||Ho(r)&&!Dr(r)&&e===tn||r===Nr&&i}function kf(e){return ir(e)&&e!==rn&&!Dr(e)&&e!==hf&&e!==mf&&e!==Nr&&e!==$o&&e!==qo&&e!==Uo&&e!==Wo&&e!==Go&&e!==tn&&e!==cf&&e!==ff&&e!==sf&&e!==vf&&e!==pf&&e!==df&&e!==lf&&e!==af&&e!==uf&&e!==gf&&e!==yf}function Sf(e){return!Dr(e)&&e!==Nr}function or(e,r){var t=e.charCodeAt(r),n;return t>=55296&&t<=56319&&r+1<e.length&&(n=e.charCodeAt(r+1),n>=56320&&n<=57343)?(t-55296)*1024+n-56320+65536:t}function zo(e){var r=/^\n* /;return r.test(e)}var Ko=1,on=2,Vo=3,Xo=4,je=5;function If(e,r,t,n,i,o,s,a){var u,c=0,l=null,f=!1,h=!1,p=n!==-1,d=-1,m=kf(or(e,0))&&Sf(or(e,e.length-1));if(r||s)for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=or(e,u),!ir(c))return je;m=m&&Qo(c,l,a),l=c}else{for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=or(e,u),c===tr)f=!0,p&&(h=h||u-d-1>n&&e[d+1]!==" ",d=u);else if(!ir(c))return je;m=m&&Qo(c,l,a),l=c}h=h||p&&u-d-1>n&&e[d+1]!==" "}return!f&&!h?m&&!s&&!i(e)?Ko:o===nr?je:on:t>9&&zo(e)?je:s?o===nr?je:on:h?Xo:Vo}function Pf(e,r,t,n,i){e.dump=function(){if(r.length===0)return e.quotingType===nr?'""':"''";if(!e.noCompatMode&&(bf.indexOf(r)!==-1||xf.test(r)))return e.quotingType===nr?'"'+r+'"':"'"+r+"'";var o=e.indent*Math.max(1,t),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=n||e.flowLevel>-1&&t>=e.flowLevel;function u(c){return Af(e,c)}switch(If(r,a,e.indent,s,u,e.quotingType,e.forceQuotes&&!n,i)){case Ko:return r;case on:return"'"+r.replace(/'/g,"''")+"'";case Vo:return"|"+Jo(r,e.indent)+Zo(Yo(r,o));case Xo:return">"+Jo(r,e.indent)+Zo(Yo(Rf(r,s),o));case je:return'"'+Tf(r,s)+'"';default:throw new rr("impossible error: invalid scalar style")}}()}function Jo(e,r){var t=zo(e)?String(r):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),o=i?"+":n?"":"-";return t+o+`
`}function Zo(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Rf(e,r){for(var t=/(\n+)([^\n]*)/g,n=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,t.lastIndex=c,es(e.slice(0,c),r)}(),i=e[0]===`
`||e[0]===" ",o,s;s=t.exec(e);){var a=s[1],u=s[2];o=u[0]===" ",n+=a+(!i&&!o&&u!==""?`
`:"")+es(u,r),i=o}return n}function es(e,r){if(e===""||e[0]===" ")return e;for(var t=/ [^ ]/g,n,i=0,o,s=0,a=0,u="";n=t.exec(e);)a=n.index,a-i>r&&(o=s>i?s:a,u+=`
`+e.slice(i,o),i=o+1),s=a;return u+=`
`,e.length-i>r&&s>i?u+=e.slice(i,s)+`
`+e.slice(s+1):u+=e.slice(i),u.slice(1)}function Tf(e){for(var r="",t=0,n,i=0;i<e.length;t>=65536?i+=2:i++)t=or(e,i),n=M[t],!n&&ir(t)?(r+=e[i],t>=65536&&(r+=e[i+1])):r+=n||Cf(t);return r}function Ff(e,r,t){var n="",i=e.tag,o,s,a;for(o=0,s=t.length;o<s;o+=1)a=t[o],e.replacer&&(a=e.replacer.call(t,String(o),a)),(ae(e,r,a,!1,!1)||typeof a=="undefined"&&ae(e,r,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function rs(e,r,t,n){var i="",o=e.tag,s,a,u;for(s=0,a=t.length;s<a;s+=1)u=t[s],e.replacer&&(u=e.replacer.call(t,String(s),u)),(ae(e,r+1,u,!0,!0,!1,!0)||typeof u=="undefined"&&ae(e,r+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=nn(e,r)),e.dump&&tr===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function Of(e,r,t){var n="",i=e.tag,o=Object.keys(t),s,a,u,c,l;for(s=0,a=o.length;s<a;s+=1)l="",n!==""&&(l+=", "),e.condenseFlow&&(l+='"'),u=o[s],c=t[u],e.replacer&&(c=e.replacer.call(t,u,c)),!!ae(e,r,u,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),!!ae(e,r,c,!1,!1)&&(l+=e.dump,n+=l));e.tag=i,e.dump="{"+n+"}"}function Lf(e,r,t,n){var i="",o=e.tag,s=Object.keys(t),a,u,c,l,f,h;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new rr("sortKeys must be a boolean or a function");for(a=0,u=s.length;a<u;a+=1)h="",(!n||i!=="")&&(h+=nn(e,r)),c=s[a],l=t[c],e.replacer&&(l=e.replacer.call(t,c,l)),!!ae(e,r+1,c,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&tr===e.dump.charCodeAt(0)?h+="?":h+="? "),h+=e.dump,f&&(h+=nn(e,r)),!!ae(e,r+1,l,!0,f)&&(e.dump&&tr===e.dump.charCodeAt(0)?h+=":":h+=": ",h+=e.dump,i+=h));e.tag=o,e.dump=i||"{}"}function ts(e,r,t){var n,i,o,s,a,u;for(i=t?e.explicitTypes:e.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof r=="object"&&r instanceof a.instanceOf)&&(!a.predicate||a.predicate(r))){if(t?a.multi&&a.representName?e.tag=a.representName(r):e.tag=a.tag:e.tag="?",a.represent){if(u=e.styleMap[a.tag]||a.defaultStyle,jo.call(a.represent)==="[object Function]")n=a.represent(r,u);else if(Bo.call(a.represent,u))n=a.represent[u](r,u);else throw new rr("!<"+a.tag+'> tag resolver accepts not "'+u+'" style');e.dump=n}return!0}return!1}function ae(e,r,t,n,i,o,s){e.tag=null,e.dump=t,ts(e,t,!1)||ts(e,t,!0);var a=jo.call(e.dump),u=n,c;n&&(n=e.flowLevel<0||e.flowLevel>r);var l=a==="[object Object]"||a==="[object Array]",f,h;if(l&&(f=e.duplicates.indexOf(t),h=f!==-1),(e.tag!==null&&e.tag!=="?"||h||e.indent!==2&&r>0)&&(i=!1),h&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(l&&h&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(Lf(e,r,e.dump,i),h&&(e.dump="&ref_"+f+e.dump)):(Of(e,r,e.dump),h&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!s&&r>0?rs(e,r-1,e.dump,i):rs(e,r,e.dump,i),h&&(e.dump="&ref_"+f+e.dump)):(Ff(e,r,e.dump),h&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&Pf(e,e.dump,r,o,u);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new rr("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function Nf(e,r){var t=[],n=[],i,o;for(sn(e,t,n),i=0,o=n.length;i<o;i+=1)r.duplicates.push(t[n[i]]);r.usedDuplicates=new Array(o)}function sn(e,r,t){var n,i,o;if(e!==null&&typeof e=="object")if(i=r.indexOf(e),i!==-1)t.indexOf(i)===-1&&t.push(i);else if(r.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)sn(e[i],r,t);else for(n=Object.keys(e),i=0,o=n.length;i<o;i+=1)sn(e[n[i]],r,t)}function Df(e,r){r=r||{};var t=new Ef(r);t.noRefs||Nf(e,t);var n=e;return t.replacer&&(n=t.replacer.call({"":n},"",n)),ae(t,0,n,!0,!0)?t.dump+`
`:""}ns.exports.dump=Df});var ss=b((Tp,B)=>{"use strict";var os=Mo(),Mf=is();function an(e,r){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+r+" instead, which is now safe by default.")}}B.exports.Type=D();B.exports.Schema=Ot();B.exports.FAILSAFE_SCHEMA=Mt();B.exports.JSON_SCHEMA=Ut();B.exports.CORE_SCHEMA=Wt();B.exports.DEFAULT_SCHEMA=Pr();B.exports.load=os.load;B.exports.loadAll=os.loadAll;B.exports.dump=Mf.dump;B.exports.YAMLException=Oe();B.exports.types={binary:Qt(),float:qt(),map:Dt(),null:jt(),pairs:Kt(),set:Vt(),timestamp:Gt(),bool:Bt(),int:$t(),merge:Yt(),omap:zt(),seq:Nt(),str:Lt()};B.exports.safeLoad=an("safeLoad","load");B.exports.safeLoadAll=an("safeLoadAll","loadAll");B.exports.safeDump=an("safeDump","dump")});var hs=b((Wp,qf)=>{qf.exports=[{name:"AppVeyor",constant:"APPVEYOR",env:"APPVEYOR",pr:"APPVEYOR_PULL_REQUEST_NUMBER"},{name:"Azure Pipelines",constant:"AZURE_PIPELINES",env:"SYSTEM_TEAMFOUNDATIONCOLLECTIONURI",pr:"SYSTEM_PULLREQUEST_PULLREQUESTID"},{name:"Bamboo",constant:"BAMBOO",env:"bamboo_planKey"},{name:"Bitbucket Pipelines",constant:"BITBUCKET",env:"BITBUCKET_COMMIT",pr:"BITBUCKET_PR_ID"},{name:"Bitrise",constant:"BITRISE",env:"BITRISE_IO",pr:"BITRISE_PULL_REQUEST"},{name:"Buddy",constant:"BUDDY",env:"BUDDY_WORKSPACE_ID",pr:"BUDDY_EXECUTION_PULL_REQUEST_ID"},{name:"Buildkite",constant:"BUILDKITE",env:"BUILDKITE",pr:{env:"BUILDKITE_PULL_REQUEST",ne:"false"}},{name:"CircleCI",constant:"CIRCLE",env:"CIRCLECI",pr:"CIRCLE_PULL_REQUEST"},{name:"Cirrus CI",constant:"CIRRUS",env:"CIRRUS_CI",pr:"CIRRUS_PR"},{name:"AWS CodeBuild",constant:"CODEBUILD",env:"CODEBUILD_BUILD_ARN"},{name:"Codeship",constant:"CODESHIP",env:{CI_NAME:"codeship"}},{name:"Drone",constant:"DRONE",env:"DRONE",pr:{DRONE_BUILD_EVENT:"pull_request"}},{name:"dsari",constant:"DSARI",env:"DSARI"},{name:"GitLab CI",constant:"GITLAB",env:"GITLAB_CI"},{name:"GoCD",constant:"GOCD",env:"GO_PIPELINE_LABEL"},{name:"Hudson",constant:"HUDSON",env:"HUDSON_URL"},{name:"Jenkins",constant:"JENKINS",env:["JENKINS_URL","BUILD_ID"],pr:{any:["ghprbPullId","CHANGE_ID"]}},{name:"Magnum CI",constant:"MAGNUM",env:"MAGNUM"},{name:"Netlify CI",constant:"NETLIFY",env:"NETLIFY_BUILD_BASE",pr:{env:"PULL_REQUEST",ne:"false"}},{name:"Sail CI",constant:"SAIL",env:"SAILCI",pr:"SAIL_PULL_REQUEST_NUMBER"},{name:"Semaphore",constant:"SEMAPHORE",env:"SEMAPHORE",pr:"PULL_REQUEST_NUMBER"},{name:"Shippable",constant:"SHIPPABLE",env:"SHIPPABLE",pr:{IS_PULL_REQUEST:"true"}},{name:"Solano CI",constant:"SOLANO",env:"TDDIUM",pr:"TDDIUM_PR_ID"},{name:"Strider CD",constant:"STRIDER",env:"STRIDER"},{name:"TaskCluster",constant:"TASKCLUSTER",env:["TASK_ID","RUN_ID"]},{name:"TeamCity",constant:"TEAMCITY",env:"TEAMCITY_VERSION"},{name:"Travis CI",constant:"TRAVIS",env:"TRAVIS",pr:{env:"TRAVIS_PULL_REQUEST",ne:"false"}}]});var ms=b(G=>{"use strict";var ps=hs(),ne=process.env;Object.defineProperty(G,"_vendors",{value:ps.map(function(e){return e.constant})});G.name=null;G.isPR=null;ps.forEach(function(e){var r=Array.isArray(e.env)?e.env:[e.env],t=r.every(function(n){return ds(n)});if(G[e.constant]=t,t)switch(G.name=e.name,typeof e.pr){case"string":G.isPR=!!ne[e.pr];break;case"object":"env"in e.pr?G.isPR=e.pr.env in ne&&ne[e.pr.env]!==e.pr.ne:"any"in e.pr?G.isPR=e.pr.any.some(function(n){return!!ne[n]}):G.isPR=ds(e.pr);break;default:G.isPR=null}});G.isCI=!!(ne.CI||ne.CONTINUOUS_INTEGRATION||ne.BUILD_NUMBER||ne.RUN_ID||G.name);function ds(e){return typeof e=="string"?!!ne[e]:Object.keys(e).every(function(r){return ne[r]===e[r]})}});var ys=b((Yp,gs)=>{"use strict";gs.exports=ms().isCI});var bs=b((Hp,ln)=>{"use strict";var Uf=Object.prototype.hasOwnProperty,$="~";function cr(){}Object.create&&(cr.prototype=Object.create(null),new cr().__proto__||($=!1));function Wf(e,r,t){this.fn=e,this.context=r,this.once=t||!1}function vs(e,r,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new Wf(t,n||e,i),s=$?$+r:r;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function Br(e,r){--e._eventsCount==0?e._events=new cr:delete e._events[r]}function j(){this._events=new cr,this._eventsCount=0}j.prototype.eventNames=function(){var r=[],t,n;if(this._eventsCount===0)return r;for(n in t=this._events)Uf.call(t,n)&&r.push($?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r};j.prototype.listeners=function(r){var t=$?$+r:r,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};j.prototype.listenerCount=function(r){var t=$?$+r:r,n=this._events[t];return n?n.fn?1:n.length:0};j.prototype.emit=function(r,t,n,i,o,s){var a=$?$+r:r;if(!this._events[a])return!1;var u=this._events[a],c=arguments.length,l,f;if(u.fn){switch(u.once&&this.removeListener(r,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,s),!0}for(f=1,l=new Array(c-1);f<c;f++)l[f-1]=arguments[f];u.fn.apply(u.context,l)}else{var h=u.length,p;for(f=0;f<h;f++)switch(u[f].once&&this.removeListener(r,u[f].fn,void 0,!0),c){case 1:u[f].fn.call(u[f].context);break;case 2:u[f].fn.call(u[f].context,t);break;case 3:u[f].fn.call(u[f].context,t,n);break;case 4:u[f].fn.call(u[f].context,t,n,i);break;default:if(!l)for(p=1,l=new Array(c-1);p<c;p++)l[p-1]=arguments[p];u[f].fn.apply(u[f].context,l)}}return!0};j.prototype.on=function(r,t,n){return vs(this,r,t,n,!1)};j.prototype.once=function(r,t,n){return vs(this,r,t,n,!0)};j.prototype.removeListener=function(r,t,n,i){var o=$?$+r:r;if(!this._events[o])return this;if(!t)return Br(this,o),this;var s=this._events[o];if(s.fn)s.fn===t&&(!i||s.once)&&(!n||s.context===n)&&Br(this,o);else{for(var a=0,u=[],c=s.length;a<c;a++)(s[a].fn!==t||i&&!s[a].once||n&&s[a].context!==n)&&u.push(s[a]);u.length?this._events[o]=u.length===1?u[0]:u:Br(this,o)}return this};j.prototype.removeAllListeners=function(r){var t;return r?(t=$?$+r:r,this._events[t]&&Br(this,t)):(this._events=new cr,this._eventsCount=0),this};j.prototype.off=j.prototype.removeListener;j.prototype.addListener=j.prototype.on;j.prefixed=$;j.EventEmitter=j;typeof ln!="undefined"&&(ln.exports=j)});var ws=b((Qp,xs)=>{"use strict";xs.exports=(e,r)=>(r=r||(()=>{}),e.then(t=>new Promise(n=>{n(r())}).then(()=>t),t=>new Promise(n=>{n(r())}).then(()=>{throw t})))});var _s=b((zp,$r)=>{"use strict";var Gf=ws(),fn=class extends Error{constructor(r){super(r);this.name="TimeoutError"}},Cs=(e,r,t)=>new Promise((n,i)=>{if(typeof r!="number"||r<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(r===Infinity){n(e);return}let o=setTimeout(()=>{if(typeof t=="function"){try{n(t())}catch(u){i(u)}return}let s=typeof t=="string"?t:`Promise timed out after ${r} milliseconds`,a=t instanceof Error?t:new fn(s);typeof e.cancel=="function"&&e.cancel(),i(a)},r);Gf(e.then(n,i),()=>{clearTimeout(o)})});$r.exports=Cs;$r.exports.default=Cs;$r.exports.TimeoutError=fn});var Es=b(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});function Yf(e,r,t){let n=0,i=e.length;for(;i>0;){let o=i/2|0,s=n+o;t(e[s],r)<=0?(n=++s,i-=o+1):i=o}return n}hn.default=Yf});var ks=b(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});var Hf=Es(),As=class{constructor(){this._queue=[]}enqueue(r,t){t=Object.assign({priority:0},t);let n={priority:t.priority,run:r};if(this.size&&this._queue[this.size-1].priority>=t.priority){this._queue.push(n);return}let i=Hf.default(this._queue,n,(o,s)=>s.priority-o.priority);this._queue.splice(i,0,n)}dequeue(){let r=this._queue.shift();return r==null?void 0:r.run}filter(r){return this._queue.filter(t=>t.priority===r.priority).map(t=>t.run)}get size(){return this._queue.length}};pn.default=As});var Ps=b(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});var Qf=bs(),Ss=_s(),zf=ks(),qr=()=>{},Kf=new Ss.TimeoutError,Is=class extends Qf{constructor(r){var t,n,i,o;super();if(this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=qr,this._resolveIdle=qr,r=Object.assign({carryoverConcurrencyCount:!1,intervalCap:Infinity,interval:0,concurrency:Infinity,autoStart:!0,queueClass:zf.default},r),!(typeof r.intervalCap=="number"&&r.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=r.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof r.intervalCap})`);if(r.interval===void 0||!(Number.isFinite(r.interval)&&r.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=r.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof r.interval})`);this._carryoverConcurrencyCount=r.carryoverConcurrencyCount,this._isIntervalIgnored=r.intervalCap===Infinity||r.interval===0,this._intervalCap=r.intervalCap,this._interval=r.interval,this._queue=new r.queueClass,this._queueClass=r.queueClass,this.concurrency=r.concurrency,this._timeout=r.timeout,this._throwOnTimeout=r.throwOnTimeout===!0,this._isPaused=r.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=qr,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=qr,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let r=Date.now();if(this._intervalId===void 0){let t=this._intervalEnd-r;if(t<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let r=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return t?(this.emit("active"),t(),r&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(r){if(!(typeof r=="number"&&r>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${r}\` (${typeof r})`);this._concurrency=r,this._processQueue()}async add(r,t={}){return new Promise((n,i)=>{let o=async()=>{this._pendingCount++,this._intervalCount++;try{let s=this._timeout===void 0&&t.timeout===void 0?r():Ss.default(Promise.resolve(r()),t.timeout===void 0?this._timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?this._throwOnTimeout:t.throwOnTimeout)&&i(Kf)});n(await s)}catch(s){i(s)}this._next()};this._queue.enqueue(o,t),this._tryToStartAnother(),this.emit("add")})}async addAll(r,t){return Promise.all(r.map(async n=>this.add(n,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(r=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),r()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(r=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),r()}})}get size(){return this._queue.size}sizeBy(r){return this._queue.filter(r).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(r){this._timeout=r}};dn.default=Is});var Ts=b((Jp,mn)=>{"use strict";var Rs=(e,...r)=>new Promise(t=>{t(e(...r))});mn.exports=Rs;mn.exports.default=Rs});var Os=b((Zp,gn)=>{"use strict";var Vf=Ts(),Fs=e=>{if(!((Number.isInteger(e)||e===Infinity)&&e>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));let r=[],t=0,n=()=>{t--,r.length>0&&r.shift()()},i=(a,u,...c)=>{t++;let l=Vf(a,...c);u(l),l.then(n,n)},o=(a,u,...c)=>{t<e?i(a,u,...c):r.push(i.bind(null,a,u,...c))},s=(a,...u)=>new Promise(c=>o(a,c,...u));return Object.defineProperties(s,{activeCount:{get:()=>t},pendingCount:{get:()=>r.length},clearQueue:{value:()=>{r.length=0}}}),s};gn.exports=Fs;gn.exports.default=Fs});var Ns=b(vn=>{"use strict";var yn=class{constructor(r){this.tasks=[],this.count=r}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let r=this.tasks.shift();if(r===void 0)throw"Unexpected undefined value in tasks list";r()}}acquire(){return new Promise((r,t)=>{var n=()=>{var i=!1;r(()=>{i||(i=!0,this.count++,this.sched())})};this.tasks.push(n),process&&process.nextTick?process.nextTick(this.sched.bind(this)):setImmediate(this.sched.bind(this))})}use(r){return this.acquire().then(t=>r().then(n=>(t(),n)).catch(n=>{throw t(),n}))}};vn.Semaphore=yn;var Ls=class extends yn{constructor(){super(1)}};vn.Mutex=Ls});var Ms=b((rd,Ds)=>{"use strict";Ds.exports=({onlyFirst:e=!1}={})=>{let r=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(r,e?void 0:"g")}});var bn=b((td,js)=>{"use strict";var Xf=Ms();js.exports=e=>typeof e=="string"?e.replace(Xf(),""):e});var $s=b((nd,xn)=>{"use strict";var Bs=e=>Number.isNaN(e)?!1:e>=4352&&(e<=4447||e===9001||e===9002||11904<=e&&e<=12871&&e!==12351||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141);xn.exports=Bs;xn.exports.default=Bs});var Ws=b((id,Us)=>{"use strict";var qs="[\uD800-\uDBFF][\uDC00-\uDFFF]",Jf=e=>e&&e.exact?new RegExp(`^${qs}$`):new RegExp(qs,"g");Us.exports=Jf});var Ys=b((od,Gs)=>{"use strict";Gs.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var wn=b((sd,Qs)=>{var lr=Ys(),Hs={};for(let e of Object.keys(lr))Hs[lr[e]]=e;var x={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Qs.exports=x;for(let e of Object.keys(x)){if(!("channels"in x[e]))throw new Error("missing channels property: "+e);if(!("labels"in x[e]))throw new Error("missing channel labels property: "+e);if(x[e].labels.length!==x[e].channels)throw new Error("channel and label counts mismatch: "+e);let{channels:r,labels:t}=x[e];delete x[e].channels,delete x[e].labels,Object.defineProperty(x[e],"channels",{value:r}),Object.defineProperty(x[e],"labels",{value:t})}x.rgb.hsl=function(e){let r=e[0]/255,t=e[1]/255,n=e[2]/255,i=Math.min(r,t,n),o=Math.max(r,t,n),s=o-i,a,u;o===i?a=0:r===o?a=(t-n)/s:t===o?a=2+(n-r)/s:n===o&&(a=4+(r-t)/s),a=Math.min(a*60,360),a<0&&(a+=360);let c=(i+o)/2;return o===i?u=0:c<=.5?u=s/(o+i):u=s/(2-o-i),[a,u*100,c*100]};x.rgb.hsv=function(e){let r,t,n,i,o,s=e[0]/255,a=e[1]/255,u=e[2]/255,c=Math.max(s,a,u),l=c-Math.min(s,a,u),f=function(h){return(c-h)/6/l+1/2};return l===0?(i=0,o=0):(o=l/c,r=f(s),t=f(a),n=f(u),s===c?i=n-t:a===c?i=1/3+r-n:u===c&&(i=2/3+t-r),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,c*100]};x.rgb.hwb=function(e){let r=e[0],t=e[1],n=e[2],i=x.rgb.hsl(e)[0],o=1/255*Math.min(r,Math.min(t,n));return n=1-1/255*Math.max(r,Math.max(t,n)),[i,o*100,n*100]};x.rgb.cmyk=function(e){let r=e[0]/255,t=e[1]/255,n=e[2]/255,i=Math.min(1-r,1-t,1-n),o=(1-r-i)/(1-i)||0,s=(1-t-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[o*100,s*100,a*100,i*100]};function Zf(e,r){return(e[0]-r[0])**2+(e[1]-r[1])**2+(e[2]-r[2])**2}x.rgb.keyword=function(e){let r=Hs[e];if(r)return r;let t=Infinity,n;for(let i of Object.keys(lr)){let o=lr[i],s=Zf(e,o);s<t&&(t=s,n=i)}return n};x.keyword.rgb=function(e){return lr[e]};x.rgb.xyz=function(e){let r=e[0]/255,t=e[1]/255,n=e[2]/255;r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;let i=r*.4124+t*.3576+n*.1805,o=r*.2126+t*.7152+n*.0722,s=r*.0193+t*.1192+n*.9505;return[i*100,o*100,s*100]};x.rgb.lab=function(e){let r=x.rgb.xyz(e),t=r[0],n=r[1],i=r[2];t/=95.047,n/=100,i/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let o=116*n-16,s=500*(t-n),a=200*(n-i);return[o,s,a]};x.hsl.rgb=function(e){let r=e[0]/360,t=e[1]/100,n=e[2]/100,i,o,s;if(t===0)return s=n*255,[s,s,s];n<.5?i=n*(1+t):i=n+t-n*t;let a=2*n-i,u=[0,0,0];for(let c=0;c<3;c++)o=r+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?s=a+(i-a)*6*o:2*o<1?s=i:3*o<2?s=a+(i-a)*(2/3-o)*6:s=a,u[c]=s*255;return u};x.hsl.hsv=function(e){let r=e[0],t=e[1]/100,n=e[2]/100,i=t,o=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,i*=o<=1?o:2-o;let s=(n+t)/2,a=n===0?2*i/(o+i):2*t/(n+t);return[r,a*100,s*100]};x.hsv.rgb=function(e){let r=e[0]/60,t=e[1]/100,n=e[2]/100,i=Math.floor(r)%6,o=r-Math.floor(r),s=255*n*(1-t),a=255*n*(1-t*o),u=255*n*(1-t*(1-o));switch(n*=255,i){case 0:return[n,u,s];case 1:return[a,n,s];case 2:return[s,n,u];case 3:return[s,a,n];case 4:return[u,s,n];case 5:return[n,s,a]}};x.hsv.hsl=function(e){let r=e[0],t=e[1]/100,n=e[2]/100,i=Math.max(n,.01),o,s;s=(2-t)*n;let a=(2-t)*i;return o=t*i,o/=a<=1?a:2-a,o=o||0,s/=2,[r,o*100,s*100]};x.hwb.rgb=function(e){let r=e[0]/360,t=e[1]/100,n=e[2]/100,i=t+n,o;i>1&&(t/=i,n/=i);let s=Math.floor(6*r),a=1-n;o=6*r-s,(s&1)!=0&&(o=1-o);let u=t+o*(a-t),c,l,f;switch(s){default:case 6:case 0:c=a,l=u,f=t;break;case 1:c=u,l=a,f=t;break;case 2:c=t,l=a,f=u;break;case 3:c=t,l=u,f=a;break;case 4:c=u,l=t,f=a;break;case 5:c=a,l=t,f=u;break}return[c*255,l*255,f*255]};x.cmyk.rgb=function(e){let r=e[0]/100,t=e[1]/100,n=e[2]/100,i=e[3]/100,o=1-Math.min(1,r*(1-i)+i),s=1-Math.min(1,t*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[o*255,s*255,a*255]};x.xyz.rgb=function(e){let r=e[0]/100,t=e[1]/100,n=e[2]/100,i,o,s;return i=r*3.2406+t*-1.5372+n*-.4986,o=r*-.9689+t*1.8758+n*.0415,s=r*.0557+t*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[i*255,o*255,s*255]};x.xyz.lab=function(e){let r=e[0],t=e[1],n=e[2];r/=95.047,t/=100,n/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let i=116*t-16,o=500*(r-t),s=200*(t-n);return[i,o,s]};x.lab.xyz=function(e){let r=e[0],t=e[1],n=e[2],i,o,s;o=(r+16)/116,i=t/500+o,s=o-n/200;let a=o**3,u=i**3,c=s**3;return o=a>.008856?a:(o-16/116)/7.787,i=u>.008856?u:(i-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,i*=95.047,o*=100,s*=108.883,[i,o,s]};x.lab.lch=function(e){let r=e[0],t=e[1],n=e[2],i;i=Math.atan2(n,t)*360/2/Math.PI,i<0&&(i+=360);let s=Math.sqrt(t*t+n*n);return[r,s,i]};x.lch.lab=function(e){let r=e[0],t=e[1],i=e[2]/360*2*Math.PI,o=t*Math.cos(i),s=t*Math.sin(i);return[r,o,s]};x.rgb.ansi16=function(e,r=null){let[t,n,i]=e,o=r===null?x.rgb.hsv(e)[2]:r;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};x.hsv.ansi16=function(e){return x.rgb.ansi16(x.hsv.rgb(e),e[2])};x.rgb.ansi256=function(e){let r=e[0],t=e[1],n=e[2];return r===t&&t===n?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5)};x.ansi16.rgb=function(e){let r=e%10;if(r===0||r===7)return e>50&&(r+=3.5),r=r/10.5*255,[r,r,r];let t=(~~(e>50)+1)*.5,n=(r&1)*t*255,i=(r>>1&1)*t*255,o=(r>>2&1)*t*255;return[n,i,o]};x.ansi256.rgb=function(e){if(e>=232){let o=(e-232)*10+8;return[o,o,o]}e-=16;let r,t=Math.floor(e/36)/5*255,n=Math.floor((r=e%36)/6)/5*255,i=r%6/5*255;return[t,n,i]};x.rgb.hex=function(e){let t=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};x.hex.rgb=function(e){let r=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!r)return[0,0,0];let t=r[0];r[0].length===3&&(t=t.split("").map(a=>a+a).join(""));let n=parseInt(t,16),i=n>>16&255,o=n>>8&255,s=n&255;return[i,o,s]};x.rgb.hcg=function(e){let r=e[0]/255,t=e[1]/255,n=e[2]/255,i=Math.max(Math.max(r,t),n),o=Math.min(Math.min(r,t),n),s=i-o,a,u;return s<1?a=o/(1-s):a=0,s<=0?u=0:i===r?u=(t-n)/s%6:i===t?u=2+(n-r)/s:u=4+(r-t)/s,u/=6,u%=1,[u*360,s*100,a*100]};x.hsl.hcg=function(e){let r=e[1]/100,t=e[2]/100,n=t<.5?2*r*t:2*r*(1-t),i=0;return n<1&&(i=(t-.5*n)/(1-n)),[e[0],n*100,i*100]};x.hsv.hcg=function(e){let r=e[1]/100,t=e[2]/100,n=r*t,i=0;return n<1&&(i=(t-n)/(1-n)),[e[0],n*100,i*100]};x.hcg.rgb=function(e){let r=e[0]/360,t=e[1]/100,n=e[2]/100;if(t===0)return[n*255,n*255,n*255];let i=[0,0,0],o=r%1*6,s=o%1,a=1-s,u=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return u=(1-t)*n,[(t*i[0]+u)*255,(t*i[1]+u)*255,(t*i[2]+u)*255]};x.hcg.hsv=function(e){let r=e[1]/100,t=e[2]/100,n=r+t*(1-r),i=0;return n>0&&(i=r/n),[e[0],i*100,n*100]};x.hcg.hsl=function(e){let r=e[1]/100,n=e[2]/100*(1-r)+.5*r,i=0;return n>0&&n<.5?i=r/(2*n):n>=.5&&n<1&&(i=r/(2*(1-n))),[e[0],i*100,n*100]};x.hcg.hwb=function(e){let r=e[1]/100,t=e[2]/100,n=r+t*(1-r);return[e[0],(n-r)*100,(1-n)*100]};x.hwb.hcg=function(e){let r=e[1]/100,t=e[2]/100,n=1-t,i=n-r,o=0;return i<1&&(o=(n-i)/(1-i)),[e[0],i*100,o*100]};x.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};x.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};x.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};x.gray.hsl=function(e){return[0,0,e[0]]};x.gray.hsv=x.gray.hsl;x.gray.hwb=function(e){return[0,100,e[0]]};x.gray.cmyk=function(e){return[0,0,0,e[0]]};x.gray.lab=function(e){return[e[0],0,0]};x.gray.hex=function(e){let r=Math.round(e[0]/100*255)&255,n=((r<<16)+(r<<8)+r).toString(16).toUpperCase();return"000000".substring(n.length)+n};x.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});var Ks=b((ad,zs)=>{var Ur=wn();function eh(){let e={},r=Object.keys(Ur);for(let t=r.length,n=0;n<t;n++)e[r[n]]={distance:-1,parent:null};return e}function rh(e){let r=eh(),t=[e];for(r[e].distance=0;t.length;){let n=t.pop(),i=Object.keys(Ur[n]);for(let o=i.length,s=0;s<o;s++){let a=i[s],u=r[a];u.distance===-1&&(u.distance=r[n].distance+1,u.parent=n,t.unshift(a))}}return r}function th(e,r){return function(t){return r(e(t))}}function nh(e,r){let t=[r[e].parent,e],n=Ur[r[e].parent][e],i=r[e].parent;for(;r[i].parent;)t.unshift(r[i].parent),n=th(Ur[r[i].parent][i],n),i=r[i].parent;return n.conversion=t,n}zs.exports=function(e){let r=rh(e),t={},n=Object.keys(r);for(let i=n.length,o=0;o<i;o++){let s=n[o];r[s].parent!==null&&(t[s]=nh(s,r))}return t}});var Xs=b((ud,Vs)=>{var Cn=wn(),ih=Ks(),Be={},oh=Object.keys(Cn);function sh(e){let r=function(...t){let n=t[0];return n==null?n:(n.length>1&&(t=n),e(t))};return"conversion"in e&&(r.conversion=e.conversion),r}function ah(e){let r=function(...t){let n=t[0];if(n==null)return n;n.length>1&&(t=n);let i=e(t);if(typeof i=="object")for(let o=i.length,s=0;s<o;s++)i[s]=Math.round(i[s]);return i};return"conversion"in e&&(r.conversion=e.conversion),r}oh.forEach(e=>{Be[e]={},Object.defineProperty(Be[e],"channels",{value:Cn[e].channels}),Object.defineProperty(Be[e],"labels",{value:Cn[e].labels});let r=ih(e);Object.keys(r).forEach(n=>{let i=r[n];Be[e][n]=ah(i),Be[e][n].raw=sh(i)})});Vs.exports=Be});var na=b((cd,ta)=>{"use strict";var Js=(e,r)=>(...t)=>`[${e(...t)+r}m`,Zs=(e,r)=>(...t)=>{let n=e(...t);return`[${38+r};5;${n}m`},ea=(e,r)=>(...t)=>{let n=e(...t);return`[${38+r};2;${n[0]};${n[1]};${n[2]}m`},Wr=e=>e,ra=(e,r,t)=>[e,r,t],$e=(e,r,t)=>{Object.defineProperty(e,r,{get:()=>{let n=t();return Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0}),n},enumerable:!0,configurable:!0})},_n,qe=(e,r,t,n)=>{_n===void 0&&(_n=Xs());let i=n?10:0,o={};for(let[s,a]of Object.entries(_n)){let u=s==="ansi16"?"ansi":s;s===r?o[u]=e(t,i):typeof a=="object"&&(o[u]=e(a[r],i))}return o};function uh(){let e=new Map,r={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};r.color.gray=r.color.blackBright,r.bgColor.bgGray=r.bgColor.bgBlackBright,r.color.grey=r.color.blackBright,r.bgColor.bgGrey=r.bgColor.bgBlackBright;for(let[t,n]of Object.entries(r)){for(let[i,o]of Object.entries(n))r[i]={open:`[${o[0]}m`,close:`[${o[1]}m`},n[i]=r[i],e.set(o[0],o[1]);Object.defineProperty(r,t,{value:n,enumerable:!1})}return Object.defineProperty(r,"codes",{value:e,enumerable:!1}),r.color.close="[39m",r.bgColor.close="[49m",$e(r.color,"ansi",()=>qe(Js,"ansi16",Wr,!1)),$e(r.color,"ansi256",()=>qe(Zs,"ansi256",Wr,!1)),$e(r.color,"ansi16m",()=>qe(ea,"rgb",ra,!1)),$e(r.bgColor,"ansi",()=>qe(Js,"ansi16",Wr,!0)),$e(r.bgColor,"ansi256",()=>qe(Zs,"ansi256",Wr,!0)),$e(r.bgColor,"ansi16m",()=>qe(ea,"rgb",ra,!0)),r}Object.defineProperty(ta,"exports",{enumerable:!0,get:uh})});var ua=b((ld,aa)=>{"use strict";var ch=$s(),lh=Ws(),ia=na(),oa=["","\x9B"],Gr=e=>`${oa[0]}[${e}m`,sa=(e,r,t)=>{let n=[];e=[...e];for(let i of e){let o=i;i.includes(";")&&(i=i.split(";")[0][0]+"0");let s=ia.codes.get(Number.parseInt(i,10));if(s){let a=e.indexOf(s.toString());a===-1?n.push(Gr(r?s:o)):e.splice(a,1)}else if(r){n.push(Gr(0));break}else n.push(Gr(o))}if(r&&(n=n.filter((i,o)=>n.indexOf(i)===o),t!==void 0)){let i=Gr(ia.codes.get(Number.parseInt(t,10)));n=n.reduce((o,s)=>s===i?[s,...o]:[...o,s],[])}return n.join("")};aa.exports=(e,r,t)=>{let n=[...e],i=[],o=typeof t=="number"?t:n.length,s=!1,a,u=0,c="";for(let[l,f]of n.entries()){let h=!1;if(oa.includes(f)){let p=/\d[^m]*/.exec(e.slice(l,l+18));a=p&&p.length>0?p[0]:void 0,u<o&&(s=!0,a!==void 0&&i.push(a))}else s&&f==="m"&&(s=!1,h=!0);if(!s&&!h&&u++,!lh({exact:!0}).test(f)&&ch(f.codePointAt())&&(u++,typeof t!="number"&&o++),u>r&&u<=o)c+=f;else if(u===r&&!s&&a!==void 0)c=sa(i);else if(u>=o){c+=sa(i,!0,a);break}}return c}});var wh={};tu(wh,{default:()=>xh});var ar=_(C("@yarnpkg/cli")),W=_(C("@yarnpkg/core")),cs=_(C("@yarnpkg/libzip")),P=_(C("@yarnpkg/fslib")),ue=_(C("clipanion")),cn=_(C("path"));var xr=".bundleignore";var On=_(C("fs")),Ln=async e=>{try{return(0,On.readFileSync)(e,"utf-8").split(`
`)}catch(r){return[]}};var Nn=_(C("path")),Dn=({ignoreFile:e,cwd:r})=>(0,Nn.join)(r,e);var Wi=_(Hn());var qi=_($i()),Ui=async({cwd:e})=>{try{return(await(0,qi.default)(`${e}/**/*`,{dot:!0})).map(t=>{var n;return(n=t.split(`${e}/`)[1])!=null?n:""}).filter(Boolean)}catch(r){return[]}};var It=async({exclude:e,ignoreFile:r,cwd:t})=>{let n=Dn({ignoreFile:r,cwd:t}),i=(0,Wi.default)().add([...e,...await Ln(n)]);return(await Ui({cwd:t})).filter(a=>i.ignores(a)).map(a=>`${t}/${a}`)};var Gi=["package.json","package.yaml","package.yml"];var Ir=_(C("path")),Cc={directory:({cwd:e})=>[e],parentDirectories:({cwd:e,rootDir:r})=>{if(!e.startsWith(r))throw new Error("Package directory not in rootDir. This should never happen");let t=e,n=[];for(;;){if(t===r||t.length<r.length)return n;t=(0,Ir.dirname)(t),n=[...n,t]}},packageFiles:({cwd:e})=>Gi.map(r=>(0,Ir.join)(e,r))},_c=({cwd:e,rootDir:r})=>[...new Set(...[Object.values(Cc).map(t=>t({cwd:e,rootDir:r})).flat()])],Yi=({workspaces:e,rootDir:r})=>Array.from(e).map(({cwd:t})=>_c({cwd:t,rootDir:r})).flat();var sr=_(C("@yarnpkg/fslib")),F=_(C("typanion")),Mr=_(ss());var jf=".yarnbuildrc.yml",Bf=F.isObject({folders:F.isObject({input:F.isString(),output:F.isString()}),exclude:F.isArray(F.isString()),bail:F.isBoolean(),ignoreFile:F.isString(),maxConcurrency:F.isOptional(F.applyCascade(F.isNumber(),[F.isInteger(),F.isInInclusiveRange(1,128)]))}),un={folders:{input:".",output:"build"},exclude:[],bail:!1,ignoreFile:xr,maxConcurrency:8};async function as(e){let r=jf,t=sr.ppath.join(e.projectCwd||e.startingCwd,r);if(sr.xfs.existsSync(t)){let n=await sr.xfs.readFilePromise(t,"utf8"),i=[];try{let o=(0,Mr.load)(n,{schema:Mr.JSON_SCHEMA});if(Bf(o,{errors:i}))return o;console.warn(i)}catch(o){let s="";throw n.match(/^\s+(?!-)[^:]+\s+\S+/m)&&(s=" (config is corrupted, please check it matches the shape in the yarn.build readme."),new Error(`Parse error when loading ${t}; please check it's proper Yaml${s}`)}}return un}async function us(e){return await as(e)}async function jr(e){var t;let r=await as(e);return Ye(q(q({},un),r),{folders:q(q({},un.folders),(t=r.folders)!=null?t:{})})}var ur=class extends ar.BaseCommand{constructor(){super(...arguments);this.json=ue.Option.Boolean("--json",!1,{description:"flag is set the output will follow a JSON-stream output also known as NDJSON (https://github.com/ndjson/ndjson-spec)"});this.outputDirectory=ue.Option.String("-o,--output-directory",{description:"sets the output directory, this should be outside your source input directory."});this.noCompress=ue.Option.Boolean("--no-compress",!1,{description:"set this with --output-directory to skip zipping your bundle, when this is set your output directory must be outside your projecty root"});this.archiveName=ue.Option.String("-a,--archive-name","bundle.zip",{description:"sets the name of the archive. Any files matching this, will be excluded from subsequent archives. Defaults to ./bundle.zip"});this.exclude=ue.Option.Array("--exclude",[],{arity:1,description:"Exclude specific paths from the final bundle."});this.ignoreFile=ue.Option.String("--ignore-file",xr,{description:"set the name of ignore file. Files matching this in workspace root and package root will be used to indicate which files will be excluded from bundle."})}async removeUnusedPackages(r,t,n){var u;let{project:i,workspace:o}=await W.Project.find(n,t);if(!o)throw new ar.WorkspaceRequiredError(i.cwd,t);let s=new Set([o]),a=await us(n);this.exclude=a.exclude?[...this.exclude,...a.exclude]:this.exclude,this.ignoreFile=(u=a==null?void 0:a.ignoreFile)!=null?u:this.ignoreFile;for(let c of s)for(let l of W.Manifest.hardDependencies)for(let f of c.manifest.getForScope(l).values()){let h=i.tryWorkspaceByDescriptor(f);h!==null&&s.add(h)}for(let c of i.workspaces)s.has(c)||c.cwd!==r&&await P.xfs.removePromise(c.cwd)}async removeEmptyDirectories({cwd:r}){if(!P.xfs.statSync(r).isDirectory())return!1;let n=await P.xfs.readdirPromise(r);for(let i of n)await this.removeEmptyDirectories({cwd:P.ppath.join(r,i)});return n=await P.xfs.readdirPromise(r),n.length===0?(await P.xfs.removePromise(r),!0):!1}async removeExcluded({tmpDir:r,excluded:t,nonRemovableFiles:n,yarnDirectory:i,cacheDirectory:o,shouldRemoveEmptyDirectories:s=!1}){let a=`${r}/.git`;try{await P.xfs.lstatPromise(a)&&await P.xfs.removePromise(a)}catch(u){}await Promise.all(t.map(async u=>{if(!u.startsWith(i)&&!u.startsWith(o)&&!n.includes(u)&&!!u.startsWith(r))try{await P.xfs.lstatPromise(u)&&await P.xfs.removePromise(u)}catch(c){}})),s&&await this.removeEmptyDirectories({cwd:r})}async execute(){return await P.xfs.mktempPromise(async r=>{var T,be,ie,re;let t=`${this.context.cwd}`,n=P.ppath.join(t,this.archiveName);if(typeof this.outputDirectory=="string"){let S=ls(this.outputDirectory);if(P.xfs.existsSync(S)||await P.xfs.mkdirPromise(S),P.xfs.readdirSync(S).length!=0)return console.error("ERROR: --output-directory is not empty"),1;n=P.ppath.join(S,this.archiveName)}let i=await W.Configuration.find(this.context.cwd,this.context.plugins);if(i.projectCwd===null)throw new Error("Can't find project directory");let o=t.replace(i.projectCwd,""),s=!1,a;if(this.noCompress===!0){if(typeof this.outputDirectory!="string")return console.error("ERROR: you set --no-compress, but did not specify --output-directory"),1;if(a=ls(this.outputDirectory),a.startsWith(i.projectCwd))return console.error(`ERROR: --output-directory is inside project root with --no-compress set.
This is no allowed to prevent you destroying your project`),1;s=!0}let u=new P.NodeFS;await P.xfs.copyPromise(r,i.projectCwd,{baseFs:u});let c=`${r}${o}`,l=`${c}/${this.archiveName}`,f=this.exclude;try{await P.xfs.lstatPromise(l)&&f.push(l)}catch(S){}let h=await W.Configuration.find(c,this.context.plugins);h.use("<custom>",{enableNetwork:!1},c);let p=await W.Cache.find(h),d=`${r}/.yarn`,m=p.cwd;await this.removeUnusedPackages(r,c,h);let{project:g,workspace:v}=await W.Project.find(h,c);if(!v)throw new ar.WorkspaceRequiredError(g.cwd,c);let y=new Set([v]),k=Yi({workspaces:g.workspaces,rootDir:r});f=await It({cwd:r,ignoreFile:this.ignoreFile,exclude:f});for(let S of y)for(let H of W.Manifest.hardDependencies)for(let le of S.manifest.getForScope(H).values()){let xe=g.tryWorkspaceByDescriptor(le);xe!==null&&y.add(xe)}for(let S of y){let H=await It({cwd:S.cwd,ignoreFile:this.ignoreFile,exclude:f});await this.removeExcluded({tmpDir:r,excluded:H,nonRemovableFiles:k,yarnDirectory:d,cacheDirectory:m,shouldRemoveEmptyDirectories:!1})}await this.removeExcluded({tmpDir:r,excluded:f,nonRemovableFiles:k,yarnDirectory:d,cacheDirectory:m,shouldRemoveEmptyDirectories:!0});for(let S of g.workspaces)S.manifest.devDependencies.clear(),!y.has(S)&&(S.manifest.dependencies.clear(),S.manifest.peerDependencies.clear());if((be=(T=v==null?void 0:v.manifest)==null?void 0:T.raw)==null?void 0:be.main){let S=v.relativeCwd+cn.default.posix.sep+((re=(ie=v==null?void 0:v.manifest)==null?void 0:ie.raw)==null?void 0:re.main),H=".pnp.cjs";P.xfs.writeFilePromise(`${r}${cn.default.posix.sep}entrypoint.js`,$f(S,H))}return(await W.StreamReport.start({configuration:h,json:this.json,stdout:this.context.stdout,includeLogs:!0},async S=>{if(await g.install({cache:p,report:S}),s&&typeof a!="undefined")S.reportInfo(null,"Moving build to output directory"),await u.copyPromise(a,r);else{let H=await(0,cs.getLibzipPromise)();S.reportInfo(null,"Creating archive");let le=new P.ZipFS(n,{create:!0,libzip:H}),xe="bundle";S.reportInfo(null,"Copying files to archive"),await le.copyPromise(xe,r,{baseFs:u}),le.saveAndClose(),S.reportJson({name:"ArchiveSuccess",message:"Archive created successfuly at ",outputArchive:n})}})).exitCode()})}};ur.paths=[["bundle"]],ur.usage=ue.Command.Usage({category:"Build commands",description:"bundle a workspace package into a deployable archive",details:`
      This command will bundle up the source of the target package along with
      its dependencies into an archive.

      This is designed to be used for deployment, not for publishing, so
      everything to run except for a runtime (ie node) is bundled into
      the archive.

      Call this after you have run your build step (if any).

      This is designed to work best with zero-install configurations. If you
      don't have that, run \`yarn install\` before this command.

      Why not just compile like we do on the front-end?
      Some dependencies may use require in interesting ways, or be or call
      binaries. It's safest not to transpile them.
    `});var fs=ur,$f=(e,r)=>`
"use strict";

const path = require("path");

const pnp = require(path.normalize(path.resolve( __dirname, "${r}"))).setup();

const index = require(path.normalize(path.resolve( __dirname,"${e}")));

Object.defineProperty(exports, "__esModule", { value: true });

exports.default = index;
`;function ls(e){let r=P.npath.toPortablePath(e);return P.ppath.resolve(r)}var Aa=_(C("@yarnpkg/cli")),J=_(C("@yarnpkg/core")),z=_(C("clipanion")),ka=_(C("path"));var A=_(C("@yarnpkg/core")),hr=_(ys()),ga=_(C("os")),V=_(C("@yarnpkg/fslib")),ya=_(C("events")),va=_(Ps()),ve=_(C("path")),ba=_(Os()),kn=_(Ns()),pr=_(bn()),Yr=_(ua());var Ue=class{constructor(){this.nodes={};this.size=0;this.runSize=0;this.ran=new Set}addNode(r){if(this.nodes[r])return this.nodes[r];let t=new ca(r,this);return this.nodes[r]=t,this.size++,t}getNode(r){if(this.nodes[r])return this.nodes[r]}resetRuns(){this.ran=new Set}async resolve(r){let t=new Set,n=new Set;await this.resolveNode(r,t,n)}async resolveNode(r,t,n){n.add(r.id);for(let i of r.dependencies)if(!t.has(i.id)){if(n.has(i.id))throw new la(`${r.id} has a cyclic dependency on ${i.id}`);await this.resolveNode(i,t,n)}t.add(r.id),n.delete(r.id)}async run(r){let t=new Set,n=new Set,i={};for(let o of r)this.resolveQueue(o,t,i);return await new Promise(o=>{this.workLoop(t,i,n,o)}),i}workLoop(r,t,n,i){if(r.size!==0&&r.forEach(o=>{var s,a;o.canStart(t)&&(((s=o==null?void 0:o.node)==null?void 0:s.runCallback)?((a=o==null?void 0:o.node)==null||a.runCallback(t),n.add(o.node)):t[o.node.id]={success:!0,done:!0},r.delete(o))}),n.forEach((o,s)=>{t[o.id].done&&n.delete(s)}),Object.keys(t).map(o=>{var s,a;return(a=(s=t[o])==null?void 0:s.done)!=null?a:!0}).every(o=>o===!0)){i();return}setTimeout(()=>this.workLoop(r,t,n,i),30)}resolveQueue(r,t,n){let i=[];for(let o of r.dependencies)if(i.push(o.id),!n[o.id]&&o.runCallback){n[o.id]=q({},Ue.RunLogInit);let s=this.resolveQueue(o,t,n),a={node:o,canStart:Ue.QueueItemCanStart(s)};t.add(a)}if(!n[r.id]&&r.runCallback){n[r.id]=q({},Ue.RunLogInit);let o={node:r,canStart:Ue.QueueItemCanStart(i)};t.add(o)}return i}},fr=Ue;fr.RunLogInit={success:!1,done:!1},fr.QueueItemCanStart=r=>t=>r.map(n=>{var i,o;return(o=(i=t[n])==null?void 0:i.done)!=null?o:!0}).every(n=>n===!0);var ca=class{constructor(r,t){this.id=r,this.dependencies=[],this.graph=t}addDependency(r){return this.dependencies.push(r),this}addWorkSpace(r){return this.workspace=r,this}addRunCallback(r){return this.runCallback?this:(this.runCallback=t=>r().then(n=>{t[this.id]={done:!0,success:n}}),this.graph.runSize++,this)}},la=class extends Error{constructor(r){super(r);this.name="CyclicDependencyError",this.code="YN0003"}};var fa=_(bn()),fh="",Y=fh+"[",En=class{static pad(r=1){for(let t=0;t<r;t++)process.stdout.write(`
`);En.cursorUp(r)}static cursorUp(r=1){process.stdout.write(Y+`${r}A`)}static cursorSave(){process.stdout.write(Y+"s")}static cursorRestore(){process.stdout.write(Y+"u")}static autoWrap(r){r?process.stdout.write(Y+"?7h"):process.stdout.write(Y+"?7l")}static clearScreenDown(){process.stdout.write(Y+"J")}static async cursorPositionReport(){return new Promise(r=>{process.stdin.setRawMode(!0),process.stdin.once("data",t=>{process.stdin.setRawMode(!1),process.stdin.pause();let[n,i]=t.slice(2,t.length-1).toString().split(";").map(Number);r({x:i,y:n})}),process.stdout.write(Y+"6n")})}static setScrollableRegion(r,t){process.stdout.write(Y+`${r};${t}r`)}static resetScrollableRegion(){process.stdout.write(Y+"r")}static moveTo(r){process.stdout.write(Y+`${r.y};${r.x}H`)}static cursorHome(){process.stdout.write(Y+"H")}static alternateScreen(){process.stdout.write(Y+"?1049h")}static mainScreen(){process.stdout.write(Y+"?1049l")}static linesRequired(r,t){var o;let n=new RegExp(`([^
]{0,${t}})(
)?`,"gm");return((o=(0,fa.default)(r).match(n))!=null?o:[""]).length-1}},K=En;K.row=0,K.column=0;var pa=_(C("child_process")),da=_(C("util"));var ha=()=>process.platform==="win32"?"windows":"unix";var hh=(0,da.promisify)(pa.exec),ma=async e=>{let r=ha(),t=(({platform:i,pid:o})=>{switch(i){case"unix":return`pgrep "-P ${o}"`;case"windows":return`wmic process where (ParentProcessId=${o}) get ProcessId`;default:throw new Error("Unable to find parent process")}})({platform:r,pid:e}),n=[];try{let{stdout:i}=await hh(t);n=i.split(`
`).filter(Boolean).map(o=>parseInt(o,10)).filter(o=>!isNaN(o))}catch(i){}return n};var ye={hasBeenTerminated:!1,callId:0},An=async(e=0)=>{if(e!==ye.callId||ye.hasBeenTerminated)return;let r=process.pid;(await ma(r)).forEach(i=>{try{process.kill(i,"SIGKILL")}catch(o){}});let n=ye.callId+1;ye.callId=n,setTimeout(async()=>{An(n)},50)};var ph="yarn.build.json",xa=80,dh="-".repeat(xa),X;(function(o){o.pending="pending",o.skipped="skipped",o.inProgress="inProgress",o.failed="failed",o.succeeded="succeeded"})(X||(X={}));var R;(function(l){l.pending="pending",l.start="start",l.info="info",l.error="error",l.skipped="skipped",l.ignored="ignored",l.success="success",l.fail="fail",l.finish="finish",l.forceQuit="force-quit"})(R||(R={}));var wa=class{constructor({project:r,report:t,runCommand:n,cli:i,configuration:o,pluginConfiguration:s,dryRun:a,ignoreRunCache:u,verbose:c,concurrency:l,shouldBailInstantly:f}){this.runGraph=new fr;this.runLength=0;this.runTargets=[];this.runMutexes={};this.dryRun=!1;this.ignoreRunCache=!1;this.verbose=!1;this.shouldBailInstantly=!1;this.entrypoints=[];this.runReporter=new ya.EventEmitter;this.runReport={mutex:new kn.Mutex,totalJobs:0,skipCount:0,previousOutput:"",successCount:0,failCount:0,ignoredCount:0,bail:!1,workspaces:{},done:!1};this.nextUnitOfWork=[];this.hasSetup=!1;this.setupRunReporter=()=>{this.runReporter.on(R.pending,(r,t)=>{this.runReport.mutex.acquire().then(n=>{this.runReport.workspaces[r]={name:t,stdout:[],stderr:[],done:!1,fail:!1},n()})}),this.runReporter.on(R.start,(r,t,n)=>{this.runReport.mutex.acquire().then(i=>{this.runReport.workspaces[r]=Ye(q({},this.runReport.workspaces[r]),{start:Date.now(),runScript:n,name:t}),i()})}),this.runReporter.on(R.info,(r,t)=>{this.runReport.mutex.acquire().then(n=>{this.runReport.workspaces[r].stdout.push(t),n()})}),this.runReporter.on(R.error,(r,t)=>{this.runReport.mutex.acquire().then(n=>{this.runReport.workspaces[r].stderr.push(t),this.logError(`${r} ${t}`),n()})}),this.runReporter.on(R.success,r=>{this.runReport.mutex.acquire().then(t=>{this.runReport.workspaces[r]=Ye(q({},this.runReport.workspaces[r]),{done:!0}),this.runReport.successCount++,t()})}),this.runReporter.on(R.skipped,r=>{this.runReport.mutex.acquire().then(t=>{this.runReport.workspaces[r].done=!0,this.runReport.workspaces[r].skipped=!0,this.runReport.skipCount++,t()})}),this.runReporter.on(R.ignored,r=>{this.runReport.mutex.acquire().then(t=>{this.runReport.workspaces[r].done=!0,this.runReport.workspaces[r].ignored=!0,this.runReport.ignoredCount++,t()})}),this.runReporter.on(R.fail,(r,t)=>{this.runReport.mutex.acquire().then(n=>{this.runReport.workspaces[r].stderr.push(t),this.runReport.workspaces[r].done=!0,this.runReport.workspaces[r].fail=!0,this.runReport.failCount++,this.logError(`${r} ${t}`),n()})})};this.getDependenciesCount=async r=>{let t=0;for(let n of A.Manifest.hardDependencies)for(let i of r.manifest.getForScope(n).values())this.project.tryWorkspaceByDescriptor(i)!==null&&(t+=1);return t};this.plan=async r=>{var o,s,a,u,c;let t=this.runGraph.addNode(r.relativeCwd).addWorkSpace(r),n=!1;this.runMutexes[r.relativeCwd]=new kn.Mutex;for(let l of A.Manifest.hardDependencies)for(let f of r.manifest.getForScope(l).values()){let h=this.project.tryWorkspaceByDescriptor(f);if(h===null)continue;let p=this.runGraph.addNode(h.relativeCwd).addWorkSpace(h);t.addDependency(p);let d=await this.plan(h),m=!1;h!==this.project.topLevelWorkspace&&(m=await this.checkIfRunIsRequired(h)),(m||d)&&(n=!0,p.addRunCallback(this.createRunItem(h)))}let i=!1;if(r!==this.project.topLevelWorkspace&&(i=await this.checkIfRunIsRequired(r)),this.runReporter.emit(R.pending,r.relativeCwd),n||i)return this.runReporter.emit(R.pending,r.relativeCwd,`${((o=r.manifest.name)==null?void 0:o.scope)?`@${(s=r.manifest.name)==null?void 0:s.scope}/`:""}${(a=r.manifest.name)==null?void 0:a.name}`),t.addRunCallback(this.createRunItem(r)),!0;{let l=(u=this.runLog)==null?void 0:u.get(`${r.relativeCwd}#${this.runCommand}`);l&&((c=this.runLog)==null||c.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:l.lastModified,status:X.succeeded,haveCheckedForRerun:!0,rerun:!1,command:this.runCommand}))}return!1};this.run=async()=>{var i,o;if(this.hasSetup===!1)throw new Error("RunSupervisor is not setup, you need to call await supervisor.setup()");if(this.runReport.runStart=Date.now(),!this.dryRun&&!hr.default&&(K.pad(this.concurrency+3),this.raf(this.waitUntilDone)),this.dryRun)return!0;this.currentRunTarget=this.runTargets.length>1?"All":(o=(i=this.runTargets[0])==null?void 0:i.relativeCwd)!=null?o:"Nothing to run",hr.default||process.stderr.write(`
`);let r=this.generateHeaderString();await this.runGraph.run(this.entrypoints);let t=await this.runReport.mutex.acquire();if(this.runReport.done=!0,t(),hr.default||(K.cursorUp(K.linesRequired(this.runReport.previousOutput,process.stdout.columns)),K.clearScreenDown()),this.runReport.failCount!==0){let s=[];process.stdout.write(this.formatHeader(r)+`
`);let a=!1;for(let u in this.runReport.workspaces){let c=this.runReport.workspaces[u];if(c.fail&&s.push(u),c.stdout.length!==0||c.stderr.length!==0){a=!0;let l=this.formatHeader(`Output: ${A.formatUtils.pretty(this.configuration,u,A.FormatType.NAME)}`,2);process.stdout.write(l+`
`)}if(c.stdout.length!==0&&(a=!0,c.stdout.forEach(l=>{l.split(`
`).forEach(h=>{h.length!==0&&process.stdout.write(h+`
`)})})),c.stderr.length!==0){a=!0;let l="[stderr]";process.stderr.write(l+`
`),c.stderr.forEach(f=>{(f instanceof Error?f.toString():`${f}`).split(`
`).forEach(d=>{d.length!==0&&process.stderr.write(d+`
`)})})}}if(a&&process.stdout.write(this.grey(dh)+`
`),s.length>0){let u=this.grey(`ERROR for script ${r}
The following packages returned an error.
`);process.stderr.write(u),s.forEach(c=>{let l=`- ${A.formatUtils.pretty(this.configuration,c,A.FormatType.NAME)}`;process.stderr.write(l+`
`)})}process.stderr.write(this.grey("Search `Output: path` to find the start of the output.\n"))}let n=this.generateFinalReport();return process.stdout.write(n),await this.saveRunLog(),this.runReport.failCount===0};this.raf=r=>{setImmediate(()=>r(Date.now()))};this.waitUntilDone=r=>{if(this.runReport.done)return;let t=this.generateProgressString(r);K.cursorUp(K.linesRequired(this.runReport.previousOutput,process.stdout.columns)),K.clearScreenDown(),process.stdout.write(t),this.runReport.previousOutput=t,mh(90).then(()=>{this.raf(this.waitUntilDone)})};this.grey=r=>A.formatUtils.pretty(this.configuration,r,"grey");this.generateRunCountString=r=>{let t="";if(this.runReport.runStart){let n=A.formatUtils.pretty(this.configuration,`${this.runReport.successCount}`,"green"),i=A.formatUtils.pretty(this.configuration,`${this.runReport.failCount}`,"red"),o=A.formatUtils.pretty(this.configuration,`${this.runGraph.runSize}`,"white");t+=this.formatHeader(`${n}:${i}/${o} ${dr(this.runReport.runStart,r)}`)+`
`}return t};this.generateFinalReport=()=>{var i;let r=this.formatHeader(`${A.formatUtils.pretty(this.configuration,`${this.runCommand} finished`,this.runReport.failCount===0?"green":"red")}${this.runReport.failCount!=0?A.formatUtils.pretty(this.configuration,` with ${this.runReport.failCount} errors`,"red"):""}`)+`
`,t=this.formatHeader("Summary")+`
`;if(this.runReport.runStart){let{successCount:o,failCount:s,ignoredCount:a,skipCount:u}=this.runReport,c=this.runGraph.size-a,l=c-s-o-u,f=A.formatUtils.pretty(this.configuration,`Success: ${o}`,"green"),h=A.formatUtils.pretty(this.configuration,`Fail: ${s}`,"red"),p=A.formatUtils.pretty(this.configuration,`Skipped: ${u}`,"white"),d=A.formatUtils.pretty(this.configuration,`Up to date: ${l}`,"white"),m=A.formatUtils.pretty(this.configuration,`Total: ${c}`,"white");t+=f+`
`+h+`
`+p+`
`,this.ignoreRunCache||(t+=d+`
`),t+=m+`
`+this.grey("---")+`
`}let n=50;for(let o in this.runReport.workspaces)n+=(i=this.runReport.workspaces[o].runtimeSeconds)!=null?i:0;if(!!this.runReport.runStart&&this.runGraph.runSize>1){let o=n,a=Date.now()-this.runReport.runStart,u=dr(a,o);hr.default||(t+=`Cumulative: (cpu): ${dr(0,n)}
`,t+=`Saved: ${u}
`)}return this.runReport.runStart&&(t+="Runtime (wall): "+dr(Date.now(),this.runReport.runStart)+`
`),t+=r,t};this.createRunItem=r=>async()=>await this.limit(async()=>{var o,s,a,u,c,l,f,h,p;let t=r.relativeCwd,n=r.manifest.scripts.get(this.runCommand),i=(o=this.runLog)==null?void 0:o.get(`${r.relativeCwd}#${this.runCommand}`);if(this.runReporter.emit(R.start,r.relativeCwd,`${((s=r.manifest.name)==null?void 0:s.scope)?`@${(a=r.manifest.name)==null?void 0:a.scope}/`:""}${(u=r.manifest.name)==null?void 0:u.name}`,n),!n)return this.verbose&&this.runReporter.emit(R.info,r.relativeCwd,`Missing \`${this.runCommand}\` script in manifest.`),this.runReporter.emit(R.ignored,r.relativeCwd),!0;try{if(this.runReport.bail)return this.runReporter.emit(R.skipped,r.relativeCwd),(c=this.runLog)==null||c.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:i==null?void 0:i.lastModified,status:X.skipped,haveCheckedForRerun:!0,rerun:!1,command:this.runCommand}),!1;let d=await this.cli(this.runCommand,r.cwd,this.runReporter,t);if(d!==0)return this.shouldBailInstantly&&this.runReport.bail&&d>100?(this.runReporter.emit(R.skipped,r.relativeCwd),(l=this.runLog)==null||l.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:i==null?void 0:i.lastModified,status:X.skipped,haveCheckedForRerun:!0,rerun:!1,command:this.runCommand}),!1):(this.runReporter.emit(R.fail,r.relativeCwd),(f=this.runLog)==null||f.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:i==null?void 0:i.lastModified,status:X.failed,haveCheckedForRerun:!0,rerun:!1,command:this.runCommand}),this.shouldBailInstantly&&!this.runReport.bail&&(this.runReport.bail=!0,An()),!1);(h=this.runLog)==null||h.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:i==null?void 0:i.lastModified,status:X.succeeded,haveCheckedForRerun:!0,rerun:!1,command:this.runCommand}),this.runReporter.emit(R.success,r.relativeCwd)}catch(d){return this.runReporter.emit(R.fail,r.relativeCwd,d),(p=this.runLog)==null||p.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:i==null?void 0:i.lastModified,status:X.failed,haveCheckedForRerun:!0,rerun:!1,command:this.runCommand}),!1}return!0});let h=l!=null?l:Math.max(1,(0,ga.cpus)().length);this.configuration=o,this.pluginConfiguration=s,this.project=r,this.report=t,this.runCommand=n,this.cli=i,this.dryRun=a,this.ignoreRunCache=u,this.verbose=c,this.concurrency=h,this.shouldBailInstantly=f!=null?f:this.shouldBailInstantly,this.limit=(0,ba.default)(h),this.queue=new va.default({concurrency:h,carryoverConcurrencyCount:!0,timeout:5e4,throwOnTimeout:!0,autoStart:!0}),this.verbose&&(this.errorLogFile=V.xfs.createWriteStream(this.getRunErrorPath(),{flags:"a"}))}async setup(){this.runLog=await this.readRunLog(),this.setupRunReporter(),this.hasSetup=!0}getRunErrorPath(){return V.ppath.resolve(this.project.cwd,"yarn.build-error.log")}getRunLogPath(){return V.ppath.resolve(this.project.cwd,".yarn",ph)}async readRunLog(){let r=new Map;try{let t=await V.xfs.readJsonPromise(this.getRunLogPath());if(t&&t.packages)for(let n in t.packages)r.set(n,{lastModified:t.packages[n].lastModified,status:t.packages[n].status,haveCheckedForRerun:!1,rerun:!0,command:this.runCommand})}catch{}return r}async saveRunLog(){if(!this.runLog)return;let r;try{r=await V.xfs.readJsonPromise(this.getRunLogPath())}catch{}let t={comment:"This is an auto-generated file, it keeps track of whats been built. This is a local file, don't store this in version control.",packages:q({},r&&r.packages)};for(let[n,i]of this.runLog)i.status===X.succeeded&&(t.packages[n]=q(q({},t.packages[n]),this.runLog.get(n)));await V.xfs.writeJsonPromise(this.getRunLogPath(),t)}logError(r){this.verbose&&process.stderr.write((0,pr.default)(r)+`
`)}async addRunTarget(r){this.entrypoints.push(this.runGraph.addNode(r.relativeCwd)),await this.plan(r)&&this.runTargets.push(r)}async checkIfRunIsRequired(r){var a,u,c,l,f;if(this.ignoreRunCache===!0)return!0;let t=!1,n=V.ppath.resolve(r.project.cwd,r.relativeCwd),i,o;((a=r==null?void 0:r.manifest)==null?void 0:a.raw["yarn.build"])&&typeof(r==null?void 0:r.manifest.raw["yarn.build"].output)=="string"?i=`${n}${ve.default.posix.sep}${r==null?void 0:r.manifest.raw["yarn.build"].output}`:this.pluginConfiguration.folders.output?i=`${n}${ve.default.posix.sep}${this.pluginConfiguration.folders.output}`:(r==null?void 0:r.manifest.raw.main)&&(i=`${n}${ve.default.posix.sep}${r==null?void 0:r.manifest.raw.main.substring(0,r==null?void 0:r.manifest.raw.main.lastIndexOf(ve.default.posix.sep))}`),((u=r==null?void 0:r.manifest)==null?void 0:u.raw["yarn.build"])&&typeof(r==null?void 0:r.manifest.raw["yarn.build"].input)=="string"?o=`${n}${ve.default.posix.sep}${r==null?void 0:r.manifest.raw["yarn.build"].input}`:this.pluginConfiguration.folders.input&&(o=`${n}${ve.default.posix.sep}${this.pluginConfiguration.folders.input}`),(o==null?void 0:o.endsWith("/."))&&(o=o.substring(0,o.length-2));let s=await this.runReport.mutex.acquire();try{let h=(c=this.runLog)==null?void 0:c.get(`${r.relativeCwd}#${this.runCommand}`);if(h==null?void 0:h.haveCheckedForRerun)return(l=h==null?void 0:h.rerun)!=null?l:!0;let p=await Ca(o!=null?o:n,i);(h==null?void 0:h.lastModified)!==p&&(t=!0),(f=this.runLog)==null||f.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:p,status:t?X.succeeded:X.pending,haveCheckedForRerun:!0,rerun:t,command:this.runCommand})}catch(h){this.logError(`${r.relativeCwd}: failed to get lastModified (${h})`)}finally{s()}return t}formatHeader(r,t=0){let n=`${this.grey("-".repeat(t)+"[")} ${r} ${this.grey("]")}`,i=(0,pr.default)(n).length;return n+this.grey("-".repeat(xa-i))}generateHeaderString(){return`${A.formatUtils.pretty(this.configuration,`${this.runCommand}`,A.FormatType.CODE)} for ${A.formatUtils.pretty(this.configuration,this.currentRunTarget?this.currentRunTarget:"",A.FormatType.SCOPE)}${this.dryRun?A.formatUtils.pretty(this.configuration," --dry-run",A.FormatType.NAME):""}`}generateProgressString(r){let t="",n=s=>this.grey(`[${s}]`),i=A.formatUtils.pretty(this.configuration,"IDLE","grey");t+=this.formatHeader(this.generateHeaderString())+`
`;let o=1;for(let s in this.runReport.workspaces){let a=this.runReport.workspaces[s];if(!a||!a.start||a.done)continue;this.runReport.runStart&&(this.runReport.workspaces[s].runtimeSeconds=r-this.runReport.runStart);let u=A.formatUtils.pretty(this.configuration,s,A.FormatType.NAME),c=A.formatUtils.pretty(this.configuration,`(${a.runScript})`,A.FormatType.REFERENCE),l=a.start?A.formatUtils.pretty(this.configuration,dr(a.start,r),A.FormatType.RANGE):"",f=n(o++),h=" ".repeat(f.length-1),p=A.formatUtils.pretty(this.configuration,a.name,A.FormatType.NAME),d=`${f} ${u}${p} ${c} ${l}
`,m="",g="",v="";(0,pr.default)(d).length>=process.stdout.columns&&(m=`${f} ${u}${p}
`,g=`${h} ${c} ${l}
`,(0,pr.default)(m).length>=process.stdout.columns&&(m=(0,Yr.default)(`${f} ${u}
`,0,process.stdout.columns),g=(0,Yr.default)(`${h} ${p}
`,0,process.stdout.columns),v=(0,Yr.default)(`${h} ${c} ${l}
`,0,process.stdout.columns)),d=m+g+v),t+=d}for(o;o<this.concurrency+1;)t+=`${n(o++)} ${i}
`;return this.runReport.runStart&&(t+=this.generateRunCountString(r)),t}},Ca=async(e,r)=>{let t=0,n=await V.xfs.readdirPromise(e);return await Promise.all(n.map(async i=>{let o=`${e}${ve.default.posix.sep}${i}`;if(r&&o.startsWith(r))return;let s=await V.xfs.statPromise(o);if(s.isFile()&&s.mtimeMs>t&&(t=s.mtimeMs),s.isDirectory()){let a=await Ca(o,r);a>t&&(t=a)}})),t},dr=(e,r)=>{let t=Math.abs(r-e),n="",i=Math.trunc(t/6e4);return i&&(n+=`${i}m`,t-=i*6e4),t&&(i&&(n+=" "),n+=`${(t/1e3).toFixed(2)}s`),n};function mh(e){return new Promise(r=>setTimeout(r,e))}var Hr=wa;var _a=_(C("@yarnpkg/core")),Ea=(e,r)=>{let t=[];for(let n of e.workspacesCwds){let i=r.workspacesByCwd.get(n);i&&t.push(i,...Ea(i,r))}return t},Qr=async({targetWorkspace:e,project:r,supervisor:t})=>{if(e.workspacesCwds.size!==0){let n=Ea(e,r);for(let i of n){for(let o of _a.Manifest.hardDependencies)for(let s of i.manifest.getForScope(o).values()){let a=r.tryWorkspaceByDescriptor(s);a!==null&&await t.addRunTarget(a)}await t.addRunTarget(i)}await t.addRunTarget(e)}else await t.addRunTarget(e)};var mr=class extends Aa.BaseCommand{constructor(){super(...arguments);this.json=z.Option.Boolean("--json",!1,{description:`flag is set the output will follow a JSON-stream output
      also known as NDJSON (https://github.com/ndjson/ndjson-spec).`});this.buildCommand=z.Option.String("-c,--build-command","build",{description:'the command to be run in each package (if available), defaults to "build"'});this.interlaced=z.Option.Boolean("-i,--interlaced",!0,{description:"If false it will instead buffer the output from each process and print the resulting buffers only after their source processes have exited. Defaults to false."});this.verbose=z.Option.Boolean("-v,--verbose",!1,{description:"more information will be logged to stdout than normal."});this.dryRun=z.Option.Boolean("-d,--dry-run",!1,{description:"simulate running a build, but not actually run it"});this.ignoreBuildCache=z.Option.Boolean("--ignore-cache",!1,{description:"every package will be built, regardless of whether is has changed or not."});this.maxConcurrency=z.Option.String("-m,--max-concurrency",{description:"is the maximum number of builds that can run at a time, defaults to the number of logical CPUs on the current machine. Will override the global config option."});this.shouldBailInstantly=z.Option.Boolean("--bail",!1,{description:"exit immediately upon build failing"});this.buildTarget=z.Option.Rest();this.forceQuit=!1;this.buildLog={}}async execute(){var o,s;let r=await J.Configuration.find(this.context.cwd,this.context.plugins),t=await jr(r);this.shouldBailInstantly=(o=this.shouldBailInstantly)!=null?o:t.bail,this.shouldBailInstantly=(s=this.shouldBailInstantly)!=null?s:t.bail;let n=this.maxConcurrency===void 0?t.maxConcurrency:parseInt(this.maxConcurrency),i=await J.StreamReport.start({configuration:r,json:this.json,stdout:this.context.stdout,includeLogs:!0},async a=>{let u=this.context.cwd;typeof this.buildTarget[0]=="string"&&(u=`${r.projectCwd}${ka.default.posix.sep}${this.buildTarget[0]}`);let{project:c,workspace:l}=await J.Project.find(r,u),f=l||c.topLevelWorkspace,h=async(m,g,v,y)=>{let k=new J.miscUtils.BufferStream;k.on("data",T=>v==null?void 0:v.emit(R.info,y,T&&T.toString()));let E=new J.miscUtils.BufferStream;if(E.on("data",T=>v==null?void 0:v.emit(R.error,y,T&&T.toString())),this.forceQuit)return k.destroy(),E.destroy(),k.end(),E.end(),2;try{let T=await this.cli.run(["run",m],{cwd:g,stdout:k,stderr:E})||0;return k.end(),E.end(),T}catch(T){k.end(),E.end()}return 2},p=new Hr({project:c,configuration:r,pluginConfiguration:t,report:a,runCommand:this.buildCommand,cli:h,dryRun:this.dryRun,ignoreRunCache:this.ignoreBuildCache,verbose:this.verbose,concurrency:n,shouldBailInstantly:this.shouldBailInstantly});p.runReporter.on(R.forceQuit,()=>{this.forceQuit=!0}),await p.setup(),await Qr({targetWorkspace:f,project:c,supervisor:p}),await p.run()===!1&&a.reportError(J.MessageName.BUILD_FAILED,"Build failed")});return ye.hasBeenTerminated=!0,i.exitCode()}};mr.paths=[["build"]],mr.usage=z.Command.Usage({category:"Build commands",description:"build a package and all its dependencies",details:`
      In a monorepo with internal packages that depend on others, this command
      will traverse the dependency graph and efficiently ensure, the packages
      are built in the right order.

    `});var Sa=mr;var ja=_(C("@yarnpkg/cli")),Ba=_(C("@yarnpkg/core")),Kr=_(C("@yarnpkg/core")),$a=_(C("clipanion"));var Z=e=>{if(e==null)throw new Error("Invalid name");return e.scope?`@${e.scope}/${e.name}`:e.name};var Ia=({workspace:e,project:r})=>{let t=Array.from(e.manifest.dependencies.values()).map(i=>Z(i)),n=Array.from(r.workspaces.values()).map(i=>Z(i.manifest.name));return t.filter(i=>n.includes(i))};var Pa=({project:e,workspaceName:r})=>e.workspaces.find(n=>Z(n.manifest.name)===r);var Ta=_(C("@yarnpkg/core"));var gh={firstCharacters:"\u27A4 ",tabString:"\u2502 "},Ra="gray",gr=({format:e,padding:r,step:t=5,characters:n=gh})=>{let{firstCharacters:i,tabString:o}=n,s=o.split("");for(let a=0;a<r;a++){let u=Array(t).fill(" ").map((c,l)=>l<s.length?s[l]:c).join("");process.stdout.write(e(u,Ra))}process.stdout.write(e(i,Ra))};var yh=Ta.FormatType.NAME,Fa="red",Oa=({format:e,circular:r,dependency:t,parents:n,current:i,project:o,padding:s=0})=>{if(r){gr({format:e,padding:s+1}),process.stdout.write(e(t,yh)),process.stdout.write(e(" -> circular dependency",Fa)),process.stdout.write(`
`);return}let a=Pa({project:o,workspaceName:t});if(!a){gr({format:e,padding:s+1}),process.stdout.write(t),process.stdout.write(e("-> incorrect dependency",Fa)),process.stdout.write(`
`);return}zr({format:e,project:o,parent:i,parents:[...n,i],padding:s+1,workspace:a})};var La=({format:e,workspace:r,parent:t,parents:n,project:i,padding:o=0})=>{let s=Ia({workspace:r,project:i});for(let a of s)Oa({format:e,workspace:r,project:i,padding:o,parent:t,parents:n,current:Z(r.manifest.name),circular:t===a||n.includes(a),dependency:a})};var Na=_(C("@yarnpkg/core"));var vh=Na.FormatType.NAME,Da=({format:e,workspace:r,padding:t=0})=>{let{name:n}=r.manifest,i=Z(n);gr({format:e,padding:t}),process.stdout.write(e(i,vh)),process.stdout.write(`
`)};var zr=({format:e,workspace:r,project:t,parents:n,padding:i=0,parent:o})=>{Da({workspace:r,padding:i,format:e}),La({parents:n,workspace:r,project:t,padding:i,parent:o,format:e})};var yr=({padding:e})=>{for(let r=0;r<e;r++)process.stdout.write(`
`)};var Ma=({workspace:e,format:r})=>{let t=Z(e.manifest.name);process.stdout.write(`Build query for package: ${r(t,"bold")}`),yr({padding:1})};var vr=class extends ja.BaseCommand{async execute(){let r=await Kr.Configuration.find(this.context.cwd,this.context.plugins),{project:t,workspace:n}=await Kr.Project.find(r,this.context.cwd);if(!n)return 0;let i=(o,s)=>Ba.formatUtils.pretty(r,o,s);return yr({padding:1}),Ma({workspace:n,format:i}),zr({parents:[],workspace:n,project:t,format:i}),yr({padding:2}),0}};vr.paths=[["build","query"]],vr.usage=$a.Command.Usage({category:"Build commands",description:"prints out dependency graph for current package",details:`
          In a monorepo with internal packages that depend on others, this command
          will traverse the dependency graph and efficiently ensure, the packages
          are built in the right order.
    
        `});var qa=vr;var Ua=_(C("@yarnpkg/cli")),ee=_(C("@yarnpkg/core")),ce=_(C("clipanion")),Wa=_(C("path"));var br=class extends Ua.BaseCommand{constructor(){super(...arguments);this.json=ce.Option.Boolean("--json",!1,{description:`flag is set the output will follow a JSON-stream output
      also known as NDJSON (https://github.com/ndjson/ndjson-spec).`});this.verbose=ce.Option.Boolean("-v,--verbose",!1,{description:"more information will be logged to stdout than normal."});this.ignoreTestCache=ce.Option.Boolean("--ignore-cache",!1,{description:"every package will be tested, regardless of whether is has changed or not."});this.maxConcurrency=ce.Option.String("-m,--max-concurrency",{description:"is the maximum number of tests that can run at a time, defaults to the number of logical CPUs on the current machine. Will override the global config option."});this.shouldBailInstantly=ce.Option.Boolean("--bail",!1,{description:"exit immediately upon build failing"});this.runTarget=ce.Option.Rest();this.forceQuit=!1;this.runLog={}}async execute(){var o;let r=await ee.Configuration.find(this.context.cwd,this.context.plugins),t=await jr(r);this.shouldBailInstantly=(o=this.shouldBailInstantly)!=null?o:t.bail;let n=this.maxConcurrency===void 0?t.maxConcurrency:parseInt(this.maxConcurrency),i=await ee.StreamReport.start({configuration:r,json:this.json,stdout:this.context.stdout,includeLogs:!0},async s=>{let a=this.context.cwd;typeof this.runTarget[0]=="string"&&(a=`${r.projectCwd}${Wa.default.posix.sep}${this.runTarget[0]}`);let{project:u,workspace:c}=await ee.Project.find(r,a),l=c||u.topLevelWorkspace,f=async(d,m,g,v)=>{let y=new ee.miscUtils.BufferStream;y.on("data",E=>g==null?void 0:g.emit(R.info,v,E&&E.toString()));let k=new ee.miscUtils.BufferStream;if(k.on("data",E=>g==null?void 0:g.emit(R.error,v,E&&E.toString())),this.forceQuit)return y.destroy(),k.destroy(),y.end(),k.end(),2;try{let E=await this.cli.run(["run",d],{cwd:m,stdout:y,stderr:k})||0;return y.end(),k.end(),E}catch(E){y.end(),k.end()}return 2},h=new Hr({project:u,configuration:r,pluginConfiguration:t,report:s,runCommand:"test",cli:f,dryRun:!1,ignoreRunCache:this.ignoreTestCache,verbose:this.verbose,concurrency:n,shouldBailInstantly:this.shouldBailInstantly});h.runReporter.on(R.forceQuit,()=>{this.forceQuit=!0}),await h.setup(),await Qr({targetWorkspace:l,project:u,supervisor:h}),await h.run()===!1&&s.reportError(ee.MessageName.BUILD_FAILED,"Test failed")});return ye.hasBeenTerminated=!0,i.exitCode()}};br.paths=[["test"]],br.usage=ce.Command.Usage({category:"Test commands",description:"test a package and all its dependencies",details:`
    In a monorepo with internal packages that depend on others, this command
    will traverse the dependency graph and efficiently ensure, the packages
    are tested in the right order.
    `});var Ga=br;var bh={commands:[fs,qa,Sa,Ga]},xh=bh;return wh;})();
return plugin;
}
};
